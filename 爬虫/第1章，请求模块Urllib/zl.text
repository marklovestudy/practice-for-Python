__sula_scope.define("sula-babel-vendor",["exports"],(function(e){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function t(e){var t=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===r(t)?t:String(t)}function n(e,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,t(o.key),o)}}function o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e,r){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,r){return e.__proto__=r,e},i(e,r)}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function a(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}e._applyDecoratedDescriptor=function(e,r,t,n,o){var i={};return Object.keys(n).forEach((function(e){i[e]=n[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=t.slice().reverse().reduce((function(t,n){return n(e,r,t)||t}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,r,i),i=null),i},e._assertThisInitialized=o,e._classCallCheck=function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")},e._createClass=function(e,r,t){return r&&n(e.prototype,r),t&&n(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e},e._defineProperty=function(e,r,n){return(r=t(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e},e._getPrototypeOf=u,e._inherits=function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&i(e,r)},e._initializerDefineProperty=function(e,r,t,n){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(n):void 0})},e._possibleConstructorReturn=function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return o(e)},e._toConsumableArray=function(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(e){if("string"==typeof e)return a(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?a(e,r):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}));
__sula_scope.define("sula-creader-vendor",["exports","axios","sula-other-vendor"],(function(e,t,r){"use strict";function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var i=o(t),n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)};
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var s,c,d,l,h,p=function(){return p=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},p.apply(this,arguments)};function u(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],o=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function f(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var o,i,n=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(o=n.next()).done;)a.push(o.value)}catch(e){i={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return a}function g(e,t){for(var r=0,o=t.length,i=e.length;r<o;r++,i++)e[i]=t[r];return e}e.CRLoadMoreType=void 0,(s=e.CRLoadMoreType||(e.CRLoadMoreType={})).None="none",s.Scroll="scroll",s.Fold="fold",e.CRReaerInfoAPIType=void 0,(c=e.CRReaerInfoAPIType||(e.CRReaerInfoAPIType={})).ndocview="/ndocview/readerinfo",c.readerInfo2019="/browse/interface/getdocreader2019",c.docdimension="/optimus/docdimension/getdocreaderoptimus",e.CRRenderMode=void 0,(d=e.CRRenderMode||(e.CRRenderMode={})).Canvas="canvas",d.SVG="svg",d.HTML="html",e.CRRenderFlow=void 0,(l=e.CRRenderFlow||(e.CRRenderFlow={})).Viewport="vierport",l.UnDestroy="unDestroy",e.CRViewerMode=void 0,(h=e.CRViewerMode||(e.CRViewerMode={})).VSignalPage="signalPage",h.VDoublePage="doublePage";var b="creader-root",m="creader-canvas",v="creader-interative-canvas",k="creader-keyword-canvas",w="pageNo",x="creader-error",y="creader-page-loading",I="creader-decview",P="https://wkretype.bdimg.com/retype",C={startPage:1,pptStartPage:0,loadMoreType:e.CRLoadMoreType.Scroll,width:0,dpr:Math.max(window.devicePixelRatio||1,1.6),renderInfoRn:50,foldOpenCount:2,lazyLoadEnable:!0,pageInfoWidth:0,useProxy:!1,textSelectEnable:!1,firstPageTopPadding:40,renderMode:e.CRRenderMode.Canvas,viewerMode:e.CRViewerMode.VSignalPage,keywordEnable:!1,keywordInfo:{color:"#22ab82",backgroundColor:"",underlineColor:"#22ab82",keywordList:[]},foldCanOpen:!0,renderFlow:e.CRRenderFlow.Viewport},T="Chrome",E=0;function S(){return!(!window.ActiveXObject&&!("ActiveXObject"in window))}function R(){if(0!==E)return E;if(e=navigator.userAgent,t="",S()?t="Internet Explorer":/Safari/.exec(e)&&!/Chrome/.exec(e)?t="Safari":/(?:Chrome|CrMo|CriOS)\/([0-9.]*)/.exec(e)?t=T:/Firefox|Namoroka|Shiretoko|Minefield/.exec(e)&&(t="Firefox"),t!==T)return E=-1;var e,t,r=navigator.appVersion,o=r.indexOf("Chrome/"),i=r.substring(o+7),n=i.indexOf("."),a=i.substring(0,n);return E=+a}var M,D,L,B=function(){function e(e){var t=this;this.timeout=2e3,this.target=document.getElementsByTagName("script")[0]||document.head,this.url=e.url,this.callback=e.callback,this.callbackId=e.callbackId,e.timeout&&e.timeout>0&&(this.timeout=e.timeout),window.__CRjsonpRequestMap||(window.__CRjsonpRequestMap=new Map);var r=window.__CRjsonpRequestMap,o=r.get(this.callbackId);o||(o=[]),o.push(this),r.set(this.callbackId,o),window[this.callbackId]||(window[this.callbackId]=function(e){var o=r.get(t.callbackId),i=null==o?void 0:o.shift();null==i||i.handleResData(e)},this.doRequest())}return e.prototype.handleResData=function(e){this.callback(e),this.sendNextRequest()},e.prototype.sendNextRequest=function(){var e=window.__CRjsonpRequestMap;if(e&&e.has(this.callbackId)){var t=e.get(this.callbackId);if(0===(null==t?void 0:t.length))e.delete(this.callbackId),this.cleanup();else{var r=null==t?void 0:t[0];null==r||r.doRequest()}}else this.cleanup()},e.prototype.doRequest=function(){var e,t,r,o=document.createElement("script");o.src=this.url,R()>104&&(null===(t=null===(e=this.url)||void 0===e?void 0:e.includes)||void 0===t?void 0:t.call(e,"//wkbjcloudbos.bdimg.com"))&&(o.crossOrigin="anonymous"),null===(r=this.target.parentNode)||void 0===r||r.insertBefore(o,this.target),this.requestScript=o,this.timer=setTimeout((function(){}),this.timeout)},e.prototype.cleanup=function(){var e;this.requestScript&&(null===(e=this.requestScript.parentNode)||void 0===e||e.removeChild(this.requestScript),this.requestScript=null),this.timer&&(clearTimeout(this.timer),this.timer=void 0),window[this.callbackId]=void 0},e}(),N=["onabort","onactivate","onafterprint","onafterupdate","onanimationend","onanimationiteration","onanimationstart","onautocomplete","onautocompleteerror","onbeforeactivate","onbeforecopy","onbeforecut","onbeforedeactivate","onbeforeeditfocus","onbeforepaste","onbeforeprint","onbeforeunload","onbeforeupdate","onbegin","onblur","onbounce","oncancel","oncanplay","oncanplaythrough","oncellchange","onchange","onclick","onclose","oncompassneedscalibration","oncontextmenu","oncontrolselect","oncopy","oncuechange","oncut","ondataavailable","ondatasetchanged","ondatasetcomplete","ondblclick","ondeactivate","ondevicelight","ondevicemotion","ondeviceorientation","ondeviceproximity","ondrag","ondragdrop","ondragend","ondragenter","ondragexit","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onend","onended","onerror","onerrorupdate","onexit","onfilterchange","onfinish","onfocus","onfocusin","onfocusout","onformchange ","onforminput ","ongesturechange","ongestureend","ongesturestart","onhashchange","onhelp","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onlanguagechange","onlayoutcomplete","onload","onloadeddata","onloadedmetadata","onloadstart","onlosecapture","onmediacomplete","onmediaerror","onmessage","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onmove","onmoveend","onmovestart","onmozfullscreenchange","onmozfullscreenerror","onmozpointerlockchange","onmozpointerlockerror","onmsgesturechange","onmsgesturedoubletap","onmsgesturehold","onmsgesturerestart","onmsinertiastart","onmspointercancel","onmspointerdown","onmspointerenter","onmspointerhover","onmspointerleave","onmspointermove","onmspointerout","onmspointerover","onmspointerup","onoffline","ononline","onorientationchange","onoutofsync","onpagehide","onpageshow","onpaste","onpause","onplay","onplaying","onpopstate","onprogress","onpropertychange","onratechange","onreadystatechange","onreceived","onrepeat","onreset","onresize","onresizeend","onresizestart","onresume","onreverse","onrowdelete","onrowenter","onrowexit","onrowinserted","onrowsdelete","onrowsinserted","onscroll","onsearch","onseek","onseeked","onseeking","onselect","onselectionchange","onselectstart","onshow","onstalled","onstart","onstop","onstorage","onsubmit","onsuspend","onsynchrestored","ontimeerror","ontimeupdate","ontoggle","ontouchcancel","ontouchend","ontouchmove","ontouchstart","ontrackchange","ontransitionend","onunload","onurlflip","onuserproximity","onvolumechange","onwaiting","onwebkitanimationend","onwebkitanimationiteration","onwebkitanimationstart","onwebkitmouseforcechanged","onwebkitmouseforcedown","onwebkitmouseforceup","onwebkitmouseforcewillbegin","onwebkittransitionend","onwebkitwillrevealbottom","onwheel","onzoom"];!function(e){e.HTML="html"}(M||(M={})),function(e){e.xreader="html_view",e.ppt="new_view",e.txt="txt_view",e.html="html_editor_view",e.xmind="xmind_view"}(D||(D={})),function(e){e[e.TO_LOADMORE=1]="TO_LOADMORE",e[e.TO_LOGIN=2]="TO_LOGIN",e[e.TO_CASHIER=3]="TO_CASHIER"}(L||(L={}));var O,z;function _(e,t,r){var o,i,n=document.getElementsByTagName("script")[0]||document.head,a=null,s=null;function c(){a.parentNode&&a.parentNode.removeChild(a),window[t]=null,s&&clearTimeout(s)}return s=setTimeout((function(){c(),r&&r(new Error("Timeout"))}),8e3),window[t]=function(e){c(),r&&r(null,e)},(a=document.createElement("script")).src=e,R()>104&&(null===(o=null==e?void 0:e.includes)||void 0===o?void 0:o.call(e,"//wkbjcloudbos.bdimg.com"))&&(a.crossOrigin="anonymous"),null===(i=null==n?void 0:n.parentNode)||void 0===i||i.insertBefore(a,n),function(){window[t]&&c()}}function F(e){var t=D.xreader;switch(e){case"html_view":default:t=D.xreader;break;case"new_view":t=D.ppt;break;case"txt_view":t=D.txt;break;case"html_editor_view":t=D.html;break;case"xmind_view":t=D.xmind}return t}function j(e){return new Promise((function(t,r){var o=function(e){e?t(e):r("emptry data")};e.cssPrefix?new B({url:e.url,callbackId:"wenku_"+e.page,callback:o}):_(e.url,"wenku_"+e.page,(function(e,t){o(t)}))}))}function q(e){return new Promise((function(t,r){i.default.get("/doc/content",{params:{requrl:e.url,name:"wenku_"+e.page}}).then((function(e){e&&e.data?t(e.data):r(e)}))}))}function H(e){return new Promise((function(t,r){var o="wenku_"+e.page;e.cssPrefix&&(o=e.cssPrefix+"_wenku_"+e.page),_(e.url+"&callback="+o,o,(function(e,o){!function(e){e?t(e):r("emptry data")}(o)}))}))}function W(e){return new Promise((function(t,r){i.default.get(""+e.url,{params:e.params}).then((function(e){e&&e.data?t(e.data):r(e)}))}))}function A(e){var t,r,o,i;"string"==typeof e.htmlUrls&&(e.htmlUrls=JSON.parse(e.htmlUrls));var n=function(e){return e?e.map((function(e){return{pageIndex:e.pageIndex,url:e.pageLoadUrl,params:e.param}})):[]},a=[];Array.isArray(e.htmlUrls)&&(a=e.htmlUrls);var s=e.tpl_key||e.tplKey;return{docId:e.docId,storeId:e.storeId,tplKey:s,pageInfo:{width:+e.pageInfo.pageWidth,height:+e.pageInfo.pageHeight,version:+e.pageInfo.version},htmlBcs:Boolean(e.htmlBcs),ttfs:n(null===(t=e.htmlUrls)||void 0===t?void 0:t.ttf),jsons:n(null===(r=e.htmlUrls)||void 0===r?void 0:r.json),pngs:n(null===(o=e.htmlUrls)||void 0===o?void 0:o.png),urls:a,page:e.page,freePage:e.free_page||e.freePage,showPage:e.show_page||e.showPage,md5sum:e.md5sum,rsign:e.rsign,readerType:F(s),editorDocHtmlUrl:null===(i=e.editorInfo)||void 0===i?void 0:i.editorDocHtmlUrl,goOnReadAction:e.goOnReadAction,policyId:e.policyId}}function X(t,r){var o={doc_id:t.docId,docId:t.docId,type:t.type,clientType:1,pn:t.pn,t:+new Date,isFromBdSearch:/(www|m)\.baidu\.com/.test(document.referrer)?1:0,srcRef:document.referrer.split("?")[0],rn:t.rn};return r&&(o=Object.assign(o,r.params)),new Promise((function(n,a){var s=(null==r?void 0:r.path)||e.CRReaerInfoAPIType.readerInfo2019;i.default.get(s,{params:o}).then((function(e){var r,o=(null===(r=null==e?void 0:e.data)||void 0===r?void 0:r.data)||(null==e?void 0:e.data);if(o&&!Array.isArray(o)){var i=o;i.docId||(i.docId=t.docId);var s=A(i.oriReaderInfo||i);n(s)}else a()})).catch((function(e){a(e)}))}))}function U(e){return N.forEach((function(t){var r=new RegExp(t,"ig");e=e.replace(r,"["+t+"]")})),e}function G(t){var r=document.createElement("div");t.cssPrefix?r.id=t.cssPrefix+"-"+b:r.id=""+b,r.className=""+b;var o=t.viewerMode===e.CRViewerMode.VDoublePage?2:1,i=t.pageInfoWidth*o+"px";return r.style.width=i,r}function V(){var e='<div class="'+x+'">\n        <div class="creader-error__image"></div>\n        <div class="creader-error__text">数据加载异常，点击重试</div>\n    </div>',t=document.createElement("div");return t.id=this.selectorId(x),t.className=""+x,t.innerHTML=e,t}function $(){var e=document.createElement("div");if(e.id=this.selectorId(y),e.className="creader-pageloading-wrap",this.renderDocData.readerType===D.ppt){var t=document.createElement("div");t.classList.add("ppt-container"),e.appendChild(t);var r=document.createElement("img");r.classList.add("logo"),r.src="https://edu-wenku.bdimg.com/v1/wkSmallApp/pc/watermark-1635842134822.png",t.appendChild(r)}else for(var o=0;o<50;o++){var i=document.createElement("div");i.className="loader-block title-block",e.appendChild(i);var n=document.createElement("div");n.className="loader-block",e.appendChild(n)}return e}function J(){var e,t,r=document.getElementById(this.selectorId(y));null===(t=null===(e=null==r?void 0:r.parentNode)||void 0===e?void 0:e.removeChild)||void 0===t||t.call(e,r)}function Y(e){var t=document.createElement("canvas"),r=this.config.dpr,o=this.pageDamageScale();(t.style.width=this.pageWidth*o+"px",t.style.height=this.pageHeight*o+"px",e)?(t.width=this.pageWidth*r,t.height=this.pageHeight*r,t.getContext("2d").setTransform(r,0,0,r,0,0)):(t.width=0,t.height=0);return t}function K(e){void 0===e&&(e=!1);var t=Y.call(this,e);return t.id=this.selectorId(m),t.className=""+m,t}function Z(e){var t=Y.call(this,!0);return t.id=this.selectorId(e),t.className=""+e,t}function Q(){var e=document.createElement("div");return e.id=this.selectorId(w),e.className=""+w,e}function ee(){var e=document.createElement("div");return e.id=this.selectorId(I),e.className=""+I,e}!function(e){e.RenderInfoLoadFail="renderInfoLoadFail",e.PageContentNotLoad="pageContentNotLoad",e.XreaderBodyNull="LayoutBodyNull",e.XreaderJsonParserError="XreaderJsonParserError",e.XreaderJsonGetFailed="xreaderJsonGetFailed",e.XreaderMaxRetry="xreaderMaxRetry",e.LayoutTextOverlap="layoutTextOverlap",e.LayoutFontFailed="layoutFontFailed",e.LayoutBigImage="layoutBigImage"}(O||(O={})),function(e){e.Inited="inited",e.Loading="loading",e.Error="error",e.Rendering="rendering",e.Rendered="rendered",e.Cleared="cleared"}(z||(z={}));var te=function(){function e(e){this.pageWidth=0,this.pageHeight=0,this.status=z.Inited,this.retryCount=0,this.index=e.index,this.rootEl=e.rootEl,this.config=e.config,this.pageWidth=e.renderDocData.pageRenderWidth,this.pageHeight=e.renderDocData.pageRenderHeight,this.emitter=e.emitter,this.renderDocData=e.renderDocData,this.readerInfoDataSource=e.readerInfoDataSource}return e.prototype.render=function(){throw Error("need subclass to implement render() method!!!")},e.prototype.prepareReader=function(){throw Error("need subclass to implement prepareReader() method!!!")},e.prototype.selectorId=function(e){throw Error("need subclass to implement selectorId() method!!!")},e.prototype.emitError=function(e,t,r){var o;null===(o=this.emitter)||void 0===o||o.emit("error",{code:e,message:t,info:r})},e.prototype.updateStatus=function(e){throw Error("need subclass to implement updateStatus() method!!!")},e.prototype.needAddSkeleton=function(){throw Error("need subclass to implement needAddSkeleton() method!!!")},e.prototype.removeErrorEl=function(){var e=document.getElementById(this.selectorId(x));e&&e.parentElement&&e.parentElement.removeChild(e)},e.prototype.changePageElHeight=function(e){var t=document.getElementById(this.selectorId(w));t&&(t.style.height=e?e+"px":"")},e.prototype.pageDamageScale=function(){return this.config.width<=0?1:this.config.width/this.pageWidth},e.prototype.addErrorIfNeed=function(){var e=this,t=document.getElementById(this.selectorId(x));if(!t){t=V.call(this);var r=document.getElementById(this.selectorId(w));r&&t&&(t.addEventListener("click",(function(t){t.stopPropagation(),e.render()})),r.appendChild(t))}},e}(),re=function(){function e(){}return e.prototype.draw=function(e,t){throw new Error("must be implemented by subclass "+e)},e}(),oe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.draw=function(e,t){t.canvas.width&&t.canvas.height&&this.drawOneCanvas(e,t)},t.prototype.drawOneCanvas=function(e,t){var r,o=t.canvas.getContext("2d");e.backgroundColor&&(o.fillStyle=e.backgroundColor,o.fillRect(e.pos.x,e.pos.y,e.pos.w,e.pos.h)),o.fillStyle=e.color;var i=(null===(r=e.fontFamily)||void 0===r?void 0:r.join(","))||"",n=e.fontStyle+" "+e.fontWeight+" "+e.fontSize+"px "+i;if(o.font=n,"10px sans-serif"===o.font&&e.fontSize,o.textBaseline="middle",o.textAlign="left",o.save(),e.filter&&(o.filter=e.filter),1!==e.scaleX&&o.scale(e.scaleX,1),1!==e.alpha&&(o.globalAlpha=e.alpha),e.matrix){o.translate(e.pos.x+e.pos.w/2,e.pos.y+e.pos.h/2);var a=e.matrix,s=a.a,c=void 0===s?1:s,d=a.b,l=void 0===d?0:d,h=a.c,p=void 0===h?0:h,u=a.d,f=void 0===u?0:u,g=a.e,b=void 0===g?1:g,m=a.f,v=void 0===m?0:m;o.transform(c,l,p,f,b,v),o.fillText(e.content,-e.pos.w/2,-e.pos.h/2)}else e.useCharRender?e.chars.forEach((function(e){o.fillText(e.text,e.rect.left,e.rect.top+e.rect.height/2)})):o.fillText(e.content,e.pos.x,e.pos.y+e.pos.h/2,e.pos.w);o.restore()},t}(re);function ie(e){return new Promise((function(t,r){var o,i=new Image;R()>104&&(null===(o=null==e?void 0:e.includes)||void 0===o?void 0:o.call(e,"//wkbjcloudbos.bdimg.com"))&&(i.crossOrigin="anonymous"),i.addEventListener("load",(function(){t(i)})),i.addEventListener("error",(function(e){r(e)})),i.src=e}))}var ne=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.draw=function(e,t){var r=this;return new Promise((function(o,i){ie(e.src).then((function(i){r.drawWithImage(e,t,i),o(i)})).catch((function(e){i(e)}))}))},t.prototype.drawWithImage=function(e,t,r){if(t.canvas.width&&t.canvas.height){var o=t.canvas.getContext("2d");try{e.picPos.iw=Math.min(e.picPos.iw,r.width),e.picPos.ih=Math.min(e.picPos.ih,r.height);var i=e.matrix||1!==e.scaleX;if(o.save(),1!==e.pos.opacity&&(o.globalAlpha=e.pos.opacity),i){if(o.translate(e.pos.x+e.pos.w/2,e.pos.y+e.pos.h/2),1!==e.scaleX&&o.scale(e.scaleX,e.scaleY),e.matrix){var n=e.matrix,a=n.a,s=void 0===a?1:a,c=n.b,d=void 0===c?0:c,l=n.c,h=void 0===l?0:l,p=n.d,u=void 0===p?0:p,f=n.e,g=void 0===f?1:f,b=n.f,m=void 0===b?0:b;o.transform(s,d,h,u,g,m)}o.drawImage(r,e.picPos.ix,e.picPos.iy,e.picPos.iw,e.picPos.ih,-e.pos.w/2,-e.pos.h/2,e.pos.w,e.pos.h)}else o.drawImage(r,e.picPos.ix,e.picPos.iy,e.picPos.iw,e.picPos.ih,e.pos.x,e.pos.y,e.pos.w,e.pos.h);return o.restore(),!0}catch(e){return!1}}},t}(re),ae=function(){function e(e){this.scaleX=1,this.scaleY=1,this.matrix=null,this.alpha=1,this.type=e,this.pos={x:0,y:0,w:0,h:0,z:0,opacity:1}}return e.prototype.parse=function(e,t){throw new Error("must be implemented by subclass "+t)},e.prototype.changeScale=function(e){throw new Error("must be implemented by subclass "+e)},e}(),se={ArialMT:"Helvetica",ChaparralPro:"arial narrow",ClarendonBT:"Times",Clarendon:"arial narrow",ArnoPro:"arial narrow",AGaramondPro:"Times",AJensonPro:"Times",AvantGarde:"Times",AvenirLTStd:"Times",ACaslonPro:"Times",AntiqueOliT:"Times",AmericanTypewriter:"Times",AkzidenzGroteskBE:"Times",Birka:"Times",Berkeley:"Times",BellGothicStd:"Times",BodoniStd:"Times",BankMixPlain:"Times",BankSansSemiBoldItalic:"arial narrow",BickhamScriptPro:"Times",BankSansSemiBoldPlain:"Times",BankMixBoldPlain:"Times",BankSansPlain:"arial narrow",BemboStd:"Times",BernhardModernStd:"arial narrow",ComicSansMS:"Times",DINMittelschriftStd:"Times","DIN-BoldItalic":"arial narrow","DIN-Bold":"Times","DIN-Regular":"arial narrow",EgyptienneFLTStd:"Times",EurostileLT:"Times",FranklinGothic:"Times",FuturaBook:"Times",Futura:"Times","Franklin Gothic Book":"Times",Formata:"Times",Palatino:"Times",GoudyStd:"Times",GillSans:"Times",GrotesqueMT:"Times",CenturyGothic:"Times",SabonLTStd:"Times",SouvenirStd:"Times",LucidaSans:"Times",LetterGothicStd:"Times",WarnockPro:"Times",Myriad:"Times",MinionPro:"Times","MyriadPro-SemiboldCond":"arial narrow",MetaPlusBook:"Times",MrsEavesRoman:"Times",MrsEavesBold:"Times",MetaPlusBold:"Times",Museo:"Times",NewCenturySchlbk:"Times",NewsGothicStd:"Times",NewBaskerville:"Times",FrutigerLTCom:"Times",Univers:"Times",Rockwell:"Times",RotisSansSerif:"Times",Optima:"Times",OfficinaSans:"Times",OCRAStd:"Times","Arial-Bold":"Helvetica-Bold","Arial,Bold":"Helvetica-Bold","Arial-BoldItalic":"Helvetica-BoldOblique","Arial,BoldItalic":"Helvetica-BoldOblique","Arial-BoldItalicMT":"Helvetica-BoldOblique","Arial-BoldMT":"Helvetica-Bold",Arial:"Helvetica","Arial-Italic":"Helvetica-Oblique","Arial,Italic":"Helvetica-Oblique","Arial-ItalicMT":"Helvetica-Oblique","Courier-Bold":"Courier-Bold","Courier,Bold":"Courier-Bold","Courier,BoldItalic":"Courier-BoldOblique","Courier-BoldOblique":"Courier-BoldOblique",Courier:"Courier","Courier,Italic":"Courier-Oblique","CourierNew-Bold":"Courier-Bold","CourierNew,Bold":"Courier-Bold","CourierNew-BoldItalic":"Courier-BoldOblique","CourierNew,BoldItalic":"Courier-BoldOblique",CourierNew:"Courier","CourierNew-Italic":"Courier-Oblique","CourierNew,Italic":"Courier-Oblique","CourierNewPS-BoldItalicMT":"Courier-BoldOblique","CourierNewPS-BoldMT":"Courier-Bold","CourierNewPS-ItalicMT":"Courier-Oblique",CourierNewPSMT:"Courier","Courier-Oblique":"Courier-Oblique",Helvetica:"arial narrow",HelveticaNeue:"arial narrow",Interstate:"Times",Symbol:"Symbol",StoneSans:"Times",TimesNewRoman:"Times",TimesNewRomanPS:"Times",TimesNewRomanPSMT:"Times","Times-Roman":"Times New Roman","Times-Bold":"Times New Roman","Times-Italic":"Times",TrajanPro:"Times",TradeGothicLTCom:"Times",Zapfino:"Times",simsun:"Arial"};function ce(e,t){var r=e.charCodeAt(t);if(isNaN(r))return"";if(r<55296||r>57343)return e.charAt(t);if(55296<=r&&r<=56319){if(e.length<=t+1)return!1;var o=e.charCodeAt(t+1);return!(56320>o||o>57343)&&e.charAt(t)+e.charAt(t+1)}if(0===t)return!1;e.charCodeAt(t-1);return!1}function de(e){var t=0,r="",o=[];for(t=0;t<e.length;t++)!1!==(r=ce(e,t))&&o.push(r);return o}var le={bk102033:1,bk103000:1,bk185720:1,bk303781:1,bk356827:1,bk356828:1,bk356833:1,bk356835:1,bk356837:1,bk356838:1,bk356839:1,bk356840:1,bk356885:1,bk356886:1,bk356887:1,bk356888:1,bk356889:1,bk356890:1,bk370246:1,bk370247:1,bk370248:1,bk370249:1,bk400360:1,bk400937:1,bk400938:1,bk400939:1,bk400940:1,bk400941:1,bk400942:1,bk402658:1,bk402673:1,bk402791:1,bk403361:1,bk403391:1,bk404117:1,bk404157:1,bk404171:1,bk404172:1,bk404173:1,bk404174:1,bk404738:1,bk404739:1,bk405512:1,bk406252:1,bk406254:1,bk406365:1,bk407405:1,bk409665:1,bk409666:1,bk409667:1,bk409668:1,bk409669:1,bk409670:1,bk409671:1,bk409672:1,bk410062:1,bk412962:1,bk412963:1,bk415599:1,bk421317:1,bk421349:1,bk421393:1,bk421437:1,bk421865:1,bk421869:1,bk421870:1,bk421871:1,bk422160:1,bk422161:1,bk424106:1,bk424107:1,bk424108:1,bk424109:1,bk424110:1,bk424111:1,bk424902:1,bk425862:1,bk427010:1,bk427018:1,bk427019:1,bk427020:1,bk427028:1,bk427029:1,bk427038:1,bk427039:1,bk427062:1,bk427064:1,bk427571:1,bk428911:1,bk431502:1,bk433666:1,bk433670:1,bk433680:1,bk434061:1,bk434062:1,bk435744:1,bk435745:1,bk436718:1,bk436728:1,bk436738:1,bk436742:1,bk436745:1,bk436748:1,bk436768:1,bk438088:1,bk438125:1,bk438126:1,bk438588:1,bk438589:1,bk438600:1,bk439188:1,bk439225:1,bk439227:1,bk442729:1,bk442730:1,bk451289:1,bk451291:1,bk451804:1,bk451810:1,bk453242:1,bk456351:1,bk456418:1,bk458060:1,bk458071:1,bk458123:1,bk458124:1,bk468203:1,bk472067:1,bk472068:1,bk479228:1,bk479229:1,bk481699:1,bk486466:1,bk486493:1,bk486494:1,bk486497:1,bk487013:1,bk489592:1,bk489734:1,bk489735:1,bk489736:1,bk491020:1,bk491031:1,bk491032:1,bk491040:1,bk493427:1,bk493878:1,bk498451:1,bk504923:1,bk510529:1,bk512315:1,bk512316:1,bk512411:1,bk512412:1,bk512425:1,bk512431:1,bk512466:1,bk512695:1,bk512732:1,bk514906:1,bk514957:1,bk514958:1,bk517636:1,bk518212:1,bk518364:1,bk518378:1,bk518379:1,bk518474:1,bk518475:1,bk518476:1,bk518710:1,bk518718:1,bk519412:1,bk519498:1,bk520082:1,bk520108:1,bk520131:1,bk520152:1,bk520169:1,bk520194:1,bk520382:1,bk521899:1,bk522153:1,bk523036:1,bk524011:1,bk524047:1,bk524070:1,bk524091:1,bk524094:1,bk524864:1,bk524865:1,bk525498:1,bk525745:1,bk525746:1,bk526410:1,bk526855:1,bk527414:1,bk528020:1,bk528931:1,bk528948:1,bk530970:1,bk530980:1,bk530990:1,bk532420:1,bk532430:1,bk532450:1,bk532458:1,bk535910:1,bk535918:1,bk537830:1,bk540297:1,bk540838:1,bk541068:1,bk541709:1,bk543159:1,bk544033:1,bk545619:1,bk545623:1,bk545947:1,bk547628:1,bk547648:1,bk547766:1,bk548259:1,bk548844:1,bk552245:1,bk552288:1,bk552534:1,bk552587:1,bk552599:1,bk552742:1,bk552794:1,bk552801:1,bk552853:1,bk553131:1,bk553242:1,bk556610:1,bk556617:1,bk558360:1,bk558730:1,bk558808:1,bk558809:1,bk558868:1,bk558894:1,bk558895:1,bk558916:1,bk566666:1,bk584016:1,bk601100:1,bk601101:1,bk601121:1,bk601122:1,bk601123:1,bk601124:1,bk601125:1,bk601126:1,bk601127:1,bk601128:1,bk601131:1,bk601136:1,bk601137:1,bk601138:1,bk601140:1,bk601142:1,bk601143:1,bk601144:1,bk601145:1,bk601146:1,bk601147:1,bk601148:1,bk601149:1,bk601174:1,bk601177:1,bk601178:1,bk601179:1,bk601186:1,bk601187:1,bk601188:1,bk601189:1,bk601382:1,bk601428:1,bk602907:1,bk602969:1,bk603128:1,bk603367:1,bk603445:1,bk603506:1,bk603601:1,bk603602:1,bk603694:1,bk603708:1,bk621021:1,bk621201:1,bk621977:1,bk622126:1,bk622127:1,bk622128:1,bk622129:1,bk622131:1,bk622132:1,bk622133:1,bk622134:1,bk622135:1,bk622136:1,bk622137:1,bk622138:1,bk622139:1,bk622140:1,bk622141:1,bk622143:1,bk622146:1,bk622147:1,bk622148:1,bk622149:1,bk622150:1,bk622151:1,bk622152:1,bk622153:1,bk622154:1,bk622155:1,bk622156:1,bk622165:1,bk622166:1,bk622168:1,bk622169:1,bk622178:1,bk622179:1,bk622184:1,bk622188:1,bk622199:1,bk622200:1,bk622202:1,bk622203:1,bk622208:1,bk622210:1,bk622211:1,bk622212:1,bk622213:1,bk622214:1,bk622215:1,bk622220:1,bk622225:1,bk622230:1,bk622235:1,bk622240:1,bk622245:1,bk622250:1,bk622251:1,bk622252:1,bk622253:1,bk622254:1,bk622258:1,bk622259:1,bk622260:1,bk622261:1,bk622280:1,bk622291:1,bk622292:1,bk622301:1,bk622302:1,bk622303:1,bk622305:1,bk622307:1,bk622308:1,bk622310:1,bk622311:1,bk622312:1,bk622316:1,bk622318:1,bk622319:1,bk622321:1,bk622322:1,bk622323:1,bk622324:1,bk622325:1,bk622327:1,bk622328:1,bk622329:1,bk622331:1,bk622332:1,bk622333:1,bk622335:1,bk622336:1,bk622337:1,bk622338:1,bk622339:1,bk622340:1,bk622341:1,bk622342:1,bk622343:1,bk622345:1,bk622346:1,bk622347:1,bk622348:1,bk622349:1,bk622350:1,bk622351:1,bk622352:1,bk622353:1,bk622355:1,bk622358:1,bk622359:1,bk622360:1,bk622361:1,bk622362:1,bk622363:1,bk622365:1,bk622366:1,bk622367:1,bk622368:1,bk622369:1,bk622370:1,bk622371:1,bk622373:1,bk622375:1,bk622376:1,bk622377:1,bk622378:1,bk622379:1,bk622382:1,bk622383:1,bk622384:1,bk622385:1,bk622386:1,bk622387:1,bk622388:1,bk622389:1,bk622391:1,bk622392:1,bk622393:1,bk622394:1,bk622395:1,bk622396:1,bk622397:1,bk622398:1,bk622399:1,bk622400:1,bk622406:1,bk622407:1,bk622411:1,bk622412:1,bk622413:1,bk622415:1,bk622418:1,bk622420:1,bk622421:1,bk622422:1,bk622423:1,bk622425:1,bk622426:1,bk622427:1,bk622428:1,bk622429:1,bk622432:1,bk622434:1,bk622435:1,bk622436:1,bk622439:1,bk622440:1,bk622441:1,bk622442:1,bk622443:1,bk622447:1,bk622448:1,bk622449:1,bk622450:1,bk622451:1,bk622452:1,bk622453:1,bk622456:1,bk622459:1,bk622462:1,bk622463:1,bk622466:1,bk622467:1,bk622468:1,bk622470:1,bk622471:1,bk622472:1,bk622476:1,bk622477:1,bk622478:1,bk622481:1,bk622485:1,bk622486:1,bk622487:1,bk622488:1,bk622489:1,bk622490:1,bk622491:1,bk622492:1,bk622493:1,bk622495:1,bk622496:1,bk622498:1,bk622499:1,bk622500:1,bk622506:1,bk622509:1,bk622510:1,bk622516:1,bk622517:1,bk622518:1,bk622519:1,bk622521:1,bk622522:1,bk622523:1,bk622525:1,bk622526:1,bk622538:1,bk622546:1,bk622547:1,bk622548:1,bk622549:1,bk622550:1,bk622561:1,bk622562:1,bk622563:1,bk622575:1,bk622576:1,bk622577:1,bk622578:1,bk622579:1,bk622580:1,bk622581:1,bk622582:1,bk622588:1,bk622598:1,bk622600:1,bk622601:1,bk622602:1,bk622603:1,bk622615:1,bk622617:1,bk622619:1,bk622622:1,bk622630:1,bk622631:1,bk622632:1,bk622633:1,bk622650:1,bk622655:1,bk622658:1,bk622660:1,bk622678:1,bk622679:1,bk622680:1,bk622681:1,bk622682:1,bk622684:1,bk622688:1,bk622689:1,bk622690:1,bk622691:1,bk622692:1,bk622696:1,bk622698:1,bk622700:1,bk622725:1,bk622728:1,bk622750:1,bk622751:1,bk622752:1,bk622753:1,bk622754:1,bk622755:1,bk622756:1,bk622757:1,bk622758:1,bk622759:1,bk622760:1,bk622761:1,bk622762:1,bk622763:1,bk622770:1,bk622777:1,bk622821:1,bk622822:1,bk622823:1,bk622824:1,bk622825:1,bk622826:1,bk622827:1,bk622836:1,bk622837:1,bk622840:1,bk622841:1,bk622842:1,bk622843:1,bk622844:1,bk622845:1,bk622846:1,bk622847:1,bk622848:1,bk622849:1,bk622855:1,bk622856:1,bk622857:1,bk622858:1,bk622859:1,bk622860:1,bk622861:1,bk622864:1,bk622865:1,bk622866:1,bk622867:1,bk622869:1,bk622870:1,bk622871:1,bk622877:1,bk622878:1,bk622879:1,bk622880:1,bk622881:1,bk622882:1,bk622884:1,bk622885:1,bk622886:1,bk622891:1,bk622892:1,bk622893:1,bk622895:1,bk622897:1,bk622898:1,bk622900:1,bk622901:1,bk622908:1,bk622909:1,bk622940:1,bk622982:1,bk628218:1,bk628288:1,bk628366:1,bk628368:1,bk650600:1,bk650700:1,bk650800:1,bk650900:1,bk682900:1,bk683970:1,bk685800:1,bk690755:1,bk694301:1,bk695800:1,bk843010:1,bk843360:1,bk843420:1,bk843610:1,bk843730:1,bk843800:1,bk843850:1,bk843900:1,bk870000:1,bk870100:1,bk870300:1,bk870400:1,bk870500:1,bk888000:1,bk940056:1,bk955880:1,bk955881:1,bk955882:1,bk955888:1,bk984301:1,bk998800:1},he={ac010:1,ac021:1,ac022:1,ac023:1,ac852:1,ac853:1,ac024:1,ac027:1,ac025:1,ac020:1,ac028:1,ac029:1,ac0310:1,ac0311:1,ac0312:1,ac0313:1,ac0314:1,ac0315:1,ac0316:1,ac0317:1,ac0318:1,ac0319:1,ac0335:1,ac0570:1,ac0571:1,ac0572:1,ac0573:1,ac0574:1,ac0575:1,ac0576:1,ac0577:1,ac0578:1,ac0579:1,ac0580:1,ac0410:1,ac0411:1,ac0412:1,ac0413:1,ac0414:1,ac0415:1,ac0416:1,ac0417:1,ac0418:1,ac0419:1,ac0421:1,ac0427:1,ac0429:1,ac0710:1,ac0711:1,ac0712:1,ac0713:1,ac0714:1,ac0715:1,ac0716:1,ac0717:1,ac0718:1,ac0719:1,ac0722:1,ac0724:1,ac0728:1,ac0510:1,ac0511:1,ac0512:1,ac0513:1,ac0514:1,ac0515:1,ac0516:1,ac0517:1,ac0518:1,ac0519:1,ac0523:1,ac0470:1,ac0471:1,ac0472:1,ac0473:1,ac0474:1,ac0475:1,ac0476:1,ac0477:1,ac0478:1,ac0479:1,ac0482:1,ac0483:1,ac0790:1,ac0791:1,ac0792:1,ac0793:1,ac0794:1,ac0795:1,ac0796:1,ac0797:1,ac0798:1,ac0799:1,ac0701:1,ac0350:1,ac0351:1,ac0352:1,ac0353:1,ac0354:1,ac0355:1,ac0356:1,ac0357:1,ac0358:1,ac0359:1,ac0930:1,ac0931:1,ac0932:1,ac0933:1,ac0934:1,ac0935:1,ac0936:1,ac0937:1,ac0938:1,ac0941:1,ac0943:1,ac0530:1,ac0531:1,ac0532:1,ac0533:1,ac0534:1,ac0535:1,ac0536:1,ac0537:1,ac0538:1,ac0539:1,ac0450:1,ac0451:1,ac0452:1,ac0453:1,ac0454:1,ac0455:1,ac0456:1,ac0457:1,ac0458:1,ac0459:1,ac0591:1,ac0592:1,ac0593:1,ac0594:1,ac0595:1,ac0596:1,ac0597:1,ac0598:1,ac0599:1,ac0751:1,ac0752:1,ac0753:1,ac0754:1,ac0755:1,ac0756:1,ac0757:1,ac0758:1,ac0759:1,ac0760:1,ac0762:1,ac0763:1,ac0765:1,ac0766:1,ac0768:1,ac0769:1,ac0660:1,ac0661:1,ac0662:1,ac0663:1,ac0810:1,ac0811:1,ac0812:1,ac0813:1,ac0814:1,ac0816:1,ac0817:1,ac0818:1,ac0819:1,ac0825:1,ac0826:1,ac0827:1,ac0830:1,ac0831:1,ac0832:1,ac0833:1,ac0834:1,ac0835:1,ac0836:1,ac0837:1,ac0838:1,ac0839:1,ac0840:1,ac0730:1,ac0731:1,ac0732:1,ac0733:1,ac0734:1,ac0735:1,ac0736:1,ac0737:1,ac0738:1,ac0739:1,ac0743:1,ac0744:1,ac0745:1,ac0746:1,ac0370:1,ac0371:1,ac0372:1,ac0373:1,ac0374:1,ac0375:1,ac0376:1,ac0377:1,ac0378:1,ac0379:1,ac0391:1,ac0392:1,ac0393:1,ac0394:1,ac0395:1,ac0396:1,ac0398:1,ac0870:1,ac0871:1,ac0872:1,ac0873:1,ac0874:1,ac0875:1,ac0876:1,ac0877:1,ac0878:1,ac0879:1,ac0691:1,ac0692:1,ac0881:1,ac0883:1,ac0886:1,ac0887:1,ac0888:1,ac0550:1,ac0551:1,ac0552:1,ac0553:1,ac0554:1,ac0555:1,ac0556:1,ac0557:1,ac0558:1,ac0559:1,ac0561:1,ac0562:1,ac0563:1,ac0564:1,ac0565:1,ac0566:1,ac0951:1,ac0952:1,ac0953:1,ac0954:1,ac0431:1,ac0432:1,ac0433:1,ac0434:1,ac0435:1,ac0436:1,ac0437:1,ac0438:1,ac0439:1,ac0440:1,ac0770:1,ac0771:1,ac0772:1,ac0773:1,ac0774:1,ac0775:1,ac0776:1,ac0777:1,ac0778:1,ac0779:1,ac0851:1,ac0852:1,ac0853:1,ac0854:1,ac0855:1,ac0856:1,ac0857:1,ac0858:1,ac0859:1,ac0910:1,ac0911:1,ac0912:1,ac0913:1,ac0914:1,ac0915:1,ac0916:1,ac0917:1,ac0919:1,ac0971:1,ac0972:1,ac0973:1,ac0974:1,ac0975:1,ac0976:1,ac0977:1,ac0890:1,ac0898:1,ac0899:1,ac0891:1,ac0892:1,ac0893:1,ac0991:1,ac0990:1,ac0992:1,ac0995:1,ac0902:1,ac0994:1,ac0909:1,ac0996:1,ac0997:1,ac0908:1,ac0998:1,ac0903:1,ac0999:1,ac0901:1,ac0993:1,ac0906:1},pe={star:function(e){return"********************************************".substring(0,e)},processInfo:function(e){return e.length<9?e:(e=this.dealIDNum(e),e=this.dealBankcardNum(e),e=this.dealPassportNum(e),e=this.dealTelephoneNum(e))},dealIDNum:function(e){if(e.length<15)return e;return e.replace(/([^\d]|^)([16][1-5]|2[1-3]|3[1-7]|4[1-6]|5[0-4]|71|8[12])(\d{4})(19|20)\d{2}((0[1-9])|(1[0-2]))(([0-2][1-9])|[123]0|31)\d{3}[0-9Xx](?![0-9])/g,"$1$2$3************").replace(/([^\d]|^)([16][1-5]|2[1-3]|3[1-7]|4[1-6]|5[0-4]|71|8[12])(\d{4})\d{2}((0[1-9])|(1[0-2]))(([0-2][1-9])|[123]0|31)\d{2}[0-9Xx](?![0-9])/g,"$1$2$3*********")},dealBankcardNum:function(e){var t=this;if(e.length<16)return e;return e.replace(/([^\d]|^)(\d{6})(\d{10}|\d{13})(?![0-9])/g,(function(e,r,o,i){var n=o||"",a=i||"";return le["bk"+n.substring(0,6)]?""+(r||"")+n+t.star(a.length):e||""}))},dealPassportNum:function(e){if(e.length<9)return e;return e.replace(/([^A-Za-z0-9]|^)([GPSDgpsd]\d)(\d{7})(?![0-9])/g,"$1$2*******")},dealTelephoneNum:function(e){if(e.length<10)return e;return e.replace(/([^\d]|^)(\+86|0086)?(\s*)(1(3[0-9]|5[0-35-9]|66|7[35-8]|8[0-9]|9[89]))(\s*)(\d{4})(\s*)(\d{4})(?![0-9])/g,"$1$2$3$4$6****$8****").replace(/([^\d]|^)(\d{3,4})(-?|\s*)(\d{7,8})(?![0-9])/g,(function(e,t,r,o,i){var n=t||"",a=i||"",s=r||"",c=o||"",d=he["ac"+s];return(c||3===s.length)&&d||!c&&4===s.length&&(d||he["ac"+s.substring(0,3)])?d?""+n+s+c+a.replace(/\d/g,"*"):""+n+s.substring(0,3)+"*"+a.replace(/\d/g,"*"):e||""}))}},ue=function(e){function t(t){var r=e.call(this,"word")||this;return r.fontSize=0,r.color="#000",r.content="",r.letterSpacing=0,r.fontWeight="400",r.fontFamily=[],r.fontStyle="normal",r.filter="",r.chars=[],r.useCharRender=!1,r.backgroundColor="",r.measureCtx=t,r}return a(t,e),t.prototype.changeScale=function(e){var t;e>0&&1!==e&&(this.pos.x*=e,this.pos.y*=e,this.pos.w*=e,this.pos.h*=e,this.fontSize*=e,this.letterSpacing*=e,null===(t=this.chars)||void 0===t||t.forEach((function(t){t.rect.top*=e,t.rect.left*=e,t.rect.width*=e,t.rect.height*=e})))},t.prototype.parsePsObject=function(e){if(e){if(e._scaleX&&0!==e._scaleX&&(this.scaleX=e._scaleX,this.pos.x*=1/this.scaleX),e._rotate&&0!==e._rotate){var t=Math.PI/180*e._rotate;this.matrix={a:Math.cos(t),b:Math.sin(t),c:-Math.sin(t),d:Math.cos(t),e:0,f:0},90===e._rotate?(this.pos.x=this.pos.x-(this.pos.w-this.pos.h)/2,this.pos.y=this.pos.y-(this.pos.h-this.pos.w)/2):180===e._rotate?(this.pos.x=this.pos.x-this.pos.w,this.pos.y=this.pos.y-this.pos.h):270===e._rotate&&(this.pos.x=this.pos.x+(this.pos.h-this.pos.w)/2,this.pos.y=this.pos.y-(this.pos.w-this.pos.h)/2)}(e._opacity||e._alpha)&&(this.alpha=e._opacity||e._alpha)}},t.prototype.changeStyle=function(e,t,r){switch(e){case"font-size":return{fontSize:+t};case"letter-spacing":return{letterSpacing:+t};case"color":return{color:t};case"bold":return{fontWeight:"false"!==t?"600":"normal"};case"font-style":return{fontStyle:t};case"overflow":return{overflow:t};case"font-family":var o=r.fonts&&r.fonts[t]||t,i=se[o]&&se[o]||o;r.renderInfo.pageInfo.version>5?this.fontFamily=["'"+o+"'","'"+t+"'","'"+i+"'"]:this.fontFamily=["'"+t+"'","'"+o+"'","'"+i+"'"]}},t.prototype.changeStyleForObj=function(e,t){var r=this;if(e){var o={},i=Object.keys(e);return i&&i.forEach((function(i){var n=r.changeStyle(i,e[i],t);n&&Object.assign(o,n)})),o}},t.prototype.parse=function(e,t){var r,o,i,n=this;if(!e.c||!e.c.trim())return!1;var a=e.ps&&"object"==typeof e.ps;if(a&&0===(null===(r=e.ps)||void 0===r?void 0:r._alpha)||1===(null===(o=e.ps)||void 0===o?void 0:o._opacity))return!1;this.pos=e.p,this.content=e.c;var s=this.changeStyleForObj(e.s,t);if(s&&Object.assign(this,s),t.styleMap||(t.styleMap=new Map,t.styles&&t.styles.forEach((function(e){e.c&&e.c.forEach((function(r){var o,i,n={};(null===(o=t.styleMap)||void 0===o?void 0:o.has(r))&&(n=t.styleMap.get(r)),Object.assign(n,e.s),null===(i=t.styleMap)||void 0===i||i.set(r,n)}))}))),null===(i=e.r)||void 0===i||i.forEach((function(e){var r,o=null===(r=t.styleMap)||void 0===r?void 0:r.get(e),i=n.changeStyleForObj(o,t);i&&Object.assign(n,i)})),a){var c=e.ps;this.parsePsObject(c)}return this.changeScale(t.renderScale),this.measureCtx&&(this.chars=this.parseNodeToGrapheme()),this.content=pe.processInfo(this.content),!0},t.prototype.parseNodeToGrapheme=function(){var e=this,t=[],r=de(this.content),o=0;r.forEach((function(i,n){var a=e.widthForText(i,e.measureCtx),s={text:i,rect:{width:a,height:e.pos.h,top:e.pos.y,left:e.pos.x+o}};o+=a,n!==r.length-1&&(o+=e.letterSpacing),t.push(s)}));var i=o-this.pos.w;return t.length>1&&Math.abs(this.letterSpacing)>.1&&i<=1&&(this.useCharRender=!0),t},t.prototype.widthForText=function(e,t){var r,o=(null===(r=this.fontFamily)||void 0===r?void 0:r.join(","))||"";t.font=this.fontStyle+" "+this.fontWeight+" "+this.fontSize+"px "+o;var i=t.measureText(e);return Number(i.width.toFixed(4))||0},t.prototype.copyNodeForText=function(e){var r=new t;return Object.assign(r,this),r.content=e,r},t}(ae);function fe(e,t){var r=e.pageInfo.version;if(e.htmlBcs&&e.pngs){var o=e.pngs.find((function(e){return e.pageIndex===t}));if(o)return o.url}var i=["pn="+t,"rn=1","t=png","v="+r].join("&");return P+"/pipe/"+e.storeId+"?"+i}var ge=function(e){function t(){var t=e.call(this,"pic")||this;return t.src="",t.picPos={ix:0,iy:0,iw:0,ih:0},t}return a(t,e),t.prototype.changeScale=function(e,t){void 0===t&&(t=!0),e>0&&1!==e&&(this.pos.x*=e,this.pos.y*=e,this.pos.w*=e,this.pos.h*=e,this.pos.x0&&(this.pos.x0=this.pos.x0*e),this.pos.x1&&(this.pos.x1=this.pos.x1*e),this.pos.x2&&(this.pos.x2=this.pos.x2*e),this.pos.x3&&(this.pos.x3=this.pos.x3*e),this.pos.y0&&(this.pos.y0=this.pos.y0*e),this.pos.y1&&(this.pos.y1=this.pos.y1*e),this.pos.y2&&(this.pos.y2=this.pos.y2*e),this.pos.y3&&(this.pos.y3=this.pos.y3*e),t&&(this.picPos.ix*=e,this.picPos.iy*=e,this.picPos.iw*=e,this.picPos.ih*=e))},t.prototype.parsePicRenderWh=function(e){var t=e.x0,r=void 0===t?0:t,o=e.y0,i=void 0===o?0:o,n=e.x1,a=void 0===n?0:n,s=e.y1,c=void 0===s?0:s,d=e.x2,l=void 0===d?0:d,h=e.y2,p=void 0===h?0:h,u=Number(Math.sqrt(Math.pow(Math.abs(r-a),2)+Math.pow(Math.abs(i-c),2)).toFixed(4));return{w:Number(Math.sqrt(Math.pow(Math.abs(a-l),2)+Math.pow(Math.abs(c-p),2)).toFixed(4)),h:u}},t.prototype.parsePicRotate=function(e){var t=e.y0,r=void 0===t?0:t,o=e.y1,i=void 0===o?0:o,n=e.x1,a=void 0===n?0:n,s=e.x2,c=void 0===s?0:s,d=e.rotate,l=void 0===d?0:d,h=i>r,p=a>c;if(h&&p)return{a:-1,b:0,c:0,d:-1,e:0,f:0};if(h)return{a:1,b:0,c:0,d:-1,e:0,f:0};if(p)return{a:-1,b:0,c:0,d:1,e:0,f:0};if(Math.abs(l)>0){var u=Math.PI/180*l;return{a:Math.cos(u),b:Math.sin(u),c:-Math.sin(u),d:Math.cos(u),e:0,f:0}}},t.prototype.parse=function(e,t){var r;if((null==t?void 0:t.page)&&+(null===(r=t.page)||void 0===r?void 0:r.v)>5&&Object.prototype.hasOwnProperty.call(e.p,"opacity")&&0===e.p.opacity)return!1;var o=fe(t.renderInfo,t.curPage);if(t.config.useProxy&&(o="/img/content?requrl="+encodeURIComponent(o)),this.src=o||"",this.pos=e.p,this.picPos=e.c,this.changeScale(t.renderScale),(this.picPos.iw!==this.pos.w||this.picPos.ih!==this.pos.h)&&e.p.hasOwnProperty("x1")){var i=this.parsePicRenderWh(e.p);this.scaleX=i.w/this.picPos.iw,this.scaleY=i.h/this.picPos.ih;var n=((this.pos.y1||0)+(this.pos.y3||0))/2-this.picPos.ih/2,a=((this.pos.x1||0)+(this.pos.x3||0))/2-this.picPos.iw/2;this.pos.x=a,this.pos.y=n,this.pos.w=this.picPos.iw,this.pos.h=this.picPos.ih;var s=this.parsePicRotate(this.pos);s&&(this.matrix=s)}return!0},t.prototype.parsePPT=function(e){var t=0,r=e.curPage%e.config.renderInfoRn;e.config.customPnRn&&e.curPage>e.config.startPage&&(r=(e.curPage-e.config.startPage)%e.config.renderInfoRn),t=0===r?e.config.renderInfoRn:r;var o=e.renderInfo.urls[t-1];if(!o)return!1;e.config.useProxy&&(o="/img/content?requrl="+encodeURIComponent(o)),this.src=o;var i=e.renderInfo.pageInfo,n=i.width,a=i.height;return this.pos={x:0,y:0,w:n*e.renderScale,h:a*e.renderScale,z:0,opacity:1},this.picPos={ix:0,iy:0,iw:n,ih:a},!0},t}(ae);var be=0,me=[],ve=0;function ke(e,t){var r,o=t.config.keywordInfo,i=t.curPage,n=[],a=[],s=!1,c=e.content;if(i!==be&&(me=o.keywordList,ve=0),!c||!me.length)return{isMatch:s,subNodes:n,keywords:a};be=i;for(var d=-1,l=0,h=g([],f(e.chars)),u=0,b=0,m=function(){var t=me.join("|"),i=new RegExp(t,"g");if((d=t?c.search(i):-1)>-1){var f=(null===(r=c.match(i))||void 0===r?void 0:r[0])||"",g=c.split(f),m=0;if(b=g[0].length,g[0]){for(var v=0;v<g[0].length;v++)m+=h[v].rect.width;var k=h[g[0].length-1].rect;u=k.left+k.width;var w=Object.assign({},e,{content:g[0]||"",pos:p(p({},e.pos),{w:m,x:h[0].rect.left}),chars:h.splice(0,g[0].length)});n.push(w)}m=0;var x=f.length||d;for(v=0;v<x;v++)m+=h[v].rect.width;var y=h[0].rect.left;if(u&&y<u){var I=e.letterSpacing||0;k=h[x-1].rect;y=u-I*b,u=k.left+k.width,b+=x}var P=Object.assign({},e,{content:f||"",pos:p(p({},e.pos),{w:m,x:y}),chars:h.splice(0,f.length),color:o.color,backgroundColor:o.backgroundColor,keyword:f||""});l+=g[0].length+f.length,n.push(P),g.splice(0,1),c=g[0]&&g.join(f)||"",s=!0,a.push(p(p({},P.pos),{text:f||"",scaleX:e.scaleX})),me=me.filter((function(e){return e!==f})),ve++}else{if(l){var C=0;for(v=0;v<h.length;v++)C+=h[v].rect.width;y=h[0].rect.left;if(u&&y<u){I=e.letterSpacing||0;y=u-I*b}var T=Object.assign({},e,{content:c,chars:h,pos:p(p({},e.pos),{w:C,x:y})});n.push(T)}else n.push(e);c=""}};c;)m();return{isMatch:s,subNodes:n,keywords:a,matchNum:ve}}function we(e,t){var r,o=[],i=18,n=["Microsoft YaHei","Hiragino Sans GB","arial","helvetica","clean"],a="normal",s="normal",c=40,d=(null===(r=e.config)||void 0===r?void 0:r.pageInfoWidth)||t.pageInfo.width,l=40,h=[],p=document.createElement("canvas").getContext("2d"),u=n.join(",")||"";p.font=a+" "+s+" "+"18px "+u;var f=function(e,t,r,o,c){var d=new ue;return d.content=e,d.pos={x:t,y:r,w:o,h:i,z:0,opacity:1},d.chars=c,d.fontFamily=n,d.fontSize=i,d.fontStyle=a,d.fontWeight=s,d};return e.body.forEach((function(e){if("txt"===e.t){var t=e.c;(t=function(e){var t=document.createDocumentFragment().appendChild(document.createElement("div"));return t.innerHTML="<p>"+e+"</p>",t.innerText}(t)).split("\n").forEach((function(e){if(e&&""!==e.trim()){for(var t=de(e),r="",n=[],a=c,s=function(e){var t={text:r,rect:{top:l,left:c,width:a,height:i},chars:n,nodes:[e]};h.push(t)},u=0;u<t.length;u++){var g=p.measureText(t[u]);if(a+g.width<d-c){if(r+=t[u],n.push({text:t[u],rect:{top:l,left:a,width:g.width,height:i}}),a+=g.width,u===t.length-1){var b=f(r,c,l,a-c,n);o.push(b),s(b),r="",n=[],a=c,l=l+10+i}}else{b=f(r,c,l,a-c,n);o.push(b),s(b),r=t[u],n=[{text:t[u],rect:{top:l+10+i,left:c,width:g.width,height:i}}],a=c+g.width,l=l+10+i}}l+=20}}))}})),{nodes:o,height:l+40-i,textLines:h}}var xe,ye=function(){function e(){this.requestPromise=null}return e.prototype.send=function(e){var t=this;return this.requestPromise||(this.requestPromise=new Promise((function(r,o){i.default.get(e.path,{params:e.params}).then((function(e){r(e),t.clean()})).catch((function(e){o(e),t.clean()}))}))),this.requestPromise},e.prototype.sendPromise=function(e){var t=this;if(this.requestPromise)return this.requestPromise;if("function"!=typeof e)throw new Error("aPromiseFn must be a function");var r=e();return this.requestPromise=new Promise((function(e,o){r.then((function(r){e(r),t.clean()})).catch((function(e){o(e),t.clean()}))})),this.requestPromise},e.prototype.clean=function(){this.requestPromise=null},e}();!function(e){e[e.Normal=0]="Normal",e[e.Error=1]="Error"}(xe||(xe={}));var Ie,Pe,Ce=function(e){function t(t){var r=e.call(this,t)||this;return r.nodes=[],r.lines=[],r.renderImageCanvas=null,r.isLazy=!1,r.customFonts=[],r.customFontLoaded=!1,r.picSrc="",r.status=z.Inited,r.renderedCount=0,r.isResetToDamageMode=!1,r.keywordMatchNum=0,r.jsonPageInfo=null,r.readerStartTime=0,r.jsonPageWidth=0,r.isLazy=t.isLazy||!1,r.measureCtx=t.measureCtx,r.updateStatus(z.Inited),r}return a(t,e),t.prototype.render=function(){var e,t=this;if(this.status!==z.Loading&&this.status!==z.Rendering){this.updateStatus(z.Loading);var r=(null===(e=this.nodes)||void 0===e?void 0:e.length)>0;if(this.renderDocData.readerType===D.xreader)r?this.startRender():this.loadXreaderContent().then((function(){return t.startRender()})).catch((function(){t.updateStatus(z.Error),t.emitError(O.PageContentNotLoad,"load xreader content error")}));else if(this.renderDocData.readerType===D.ppt||this.renderDocData.readerType===D.xmind)this.readerInfoDataSource.requestIfNeed(this.index).then((function(e){e?(t.readerInfo=e,r||t.parsePPT(),t.startRender()):(t.updateStatus(z.Error),t.emitError(O.PageContentNotLoad,"load ppt content error"))}));else{if(this.renderDocData.readerType!==D.txt)throw new Error("[creader] the doc invalid: "+this.renderDocData.readerType);var o=function(){t.updatePageHeight(t.pageHeight),t.startRender()};r?o():this.loadTxtContent().then((function(){return o()})).catch((function(){t.updateStatus(z.Error),t.emitError(O.PageContentNotLoad,"load txt content error")}))}}},t.prototype.renderResizeCanvas=function(){var e=this.selectorId(m),t=document.getElementById(e);if(t&&0===t.width){var r=this.config.dpr;this.isResetToDamageMode?(t.width=this.readerInfo.pageInfo.width*r,t.height=this.readerInfo.pageInfo.height*r):(t.width=this.pageWidth*r,t.height=this.pageHeight*r),t.getContext("2d").setTransform(this.config.dpr,0,0,this.config.dpr,0,0),this.render()}},t.prototype.clearCanvas=function(){var e=this.selectorId(m),t=document.getElementById(e);t&&(t.width=0,t.height=0),this.renderImageCanvas&&(this.renderImageCanvas.width=0,this.renderImageCanvas.height=0),this.updateStatus(z.Cleared)},t.prototype.loadXreaderContent=function(){var e=this;return new Promise((function(t,r){var o={};e.readerInfoDataSource.requestIfNeed(e.index).then((function(t){var r,o;e.readerInfo=t;var i=null===(o=null===(r=null==t?void 0:t.jsons)||void 0===r?void 0:r.find)||void 0===o?void 0:o.call(r,(function(t){return t.pageIndex===e.index}));if(null==i?void 0:i.url){var n=[e.loadFontCss(),e.loadJsonContent(null==i?void 0:i.url)];return Promise.all(n)}return Promise.reject("can not find json url at page "+e.index)})).then((function(t){var r,i=t[1];if(!i)return e.emitError(O.XreaderJsonGetFailed,"jsonp get json error"),Promise.reject("can not load json content at page "+e.index);if(e.customFonts=Object.keys((null==i?void 0:i.font)||{}),o=i,i.page&&i.page.pw&&i.page.ph&&0===e.jsonPageWidth){e.jsonPageWidth=i.page.pw;var n=e.pageUnDamageScale();if(n&&1!==n){var a=i.page.ph*n;if(Math.abs(a-e.pageHeight)>1){e.pageHeight=a;var s=document.getElementById(e.selectorId(m));if(s){var c=e.config.dpr;s.style.height=a+"px",s.width=e.pageWidth*c,s.height=e.pageHeight*c,s.getContext("2d").setTransform(e.config.dpr,0,0,e.config.dpr,0,0)}}}}return(null===(r=null==o?void 0:o.body)||void 0===r?void 0:r.find((function(e){return"pic"===e.t})))&&(e.picSrc=fe(e.readerInfo,e.index)),Promise.all([e.loadImageIfNeed(e.picSrc),e.lazyLoadCustomFont()])})).then((function(){e.parseXreader(o),e.clipPageTop(o.page),t(!0)})).catch((function(e){r(e)}))}))},t.prototype.loadTxtContent=function(){var e=this;return new Promise((function(t,r){e.readerInfoDataSource.requestIfNeed(e.index).then((function(t){return t?(e.readerInfo=t,t):Promise.reject("[creader] reader info is null")})).then((function(t){var r,o,i,n,a=(r=t,o=e.index,i=r.md5sum.substring(1),n=["pn="+o,"rn=1","type=txt","spr=0","rsign="+r.rsign].join("&"),P+"/text/"+r.docId+"?"+i+"&"+n);return e.config.useProxy?W({url:"/doc/textcontent",page:e.index,params:{requrl:a}}):H({url:a,page:e.index})})).then((function(o){if(o&&Array.isArray(o)){var i=we({body:o[0].parags,page:e.index,config:e.config},e.readerInfo);i?(e.nodes=i.nodes,e.pageHeight=i.height,e.lines=i.textLines,t(!0)):r()}})).catch((function(e){r(e)}))}))},t.prototype.loadJsonContent=function(e){var t=null;return t=this.config.useProxy?q.bind(this,{url:e,page:this.index}):j.bind(this,{url:e,page:this.index,cssPrefix:this.config.cssPrefix}),this.jsonContentRequestOnce||(this.jsonContentRequestOnce=new ye),this.jsonContentRequestOnce.sendPromise(t)},t.prototype.loadImageIfNeed=function(e){var t=this;if(!this.readerInfo)return Promise.reject("can not find readerInfo");if(this.renderImage||!e)return Promise.resolve();var r=e;return new Promise((function(e){t.config.useProxy&&(r="/img/content?requrl="+encodeURIComponent(r)),ie(r).then((function(r){t.renderImage=r,e(r)})).catch((function(){e(!1)}))}))},t.prototype.lazyLoadCustomFont=function(){var e=this;return!!!(this.customFonts&&this.customFonts.length>0)||this.customFontLoaded?Promise.resolve(!0):new Promise((function(t){var o=e.customFonts.map((function(e){return new r.fontfaceobserver_standalone(e).load(null,200)}));Promise.all(o).then((function(){e.customFontLoaded=!0,t(!0)})).catch((function(r){e.customFontLoaded=!0,e.emitError(O.LayoutFontFailed,"xreader font load failed"),t(!1)}))}))},t.prototype.loadFontCss=function(){if(!this.readerInfo)return Promise.reject("can not find readerInfo");if(!this.readerInfo.ttfs||0===this.readerInfo.ttfs.length)return Promise.resolve();var e,t=function(e,t){var r=e.pageInfo.version;if(e.htmlBcs&&e.ttfs){var o=e.ttfs.find((function(e){return e.pageIndex===t}));if(!o)return;var i=["pn="+t,"t="+(S()?"eot":"ttf"),"rn=1","v="+r].join("&");return P+"/pipe/"+e.storeId+"?"+i+o.params}}(this.readerInfo,this.index);return t?(this.config.useProxy&&(t="/css/content?requrl="+encodeURIComponent(t)),e=t,new Promise((function(t){var r=document.createElement("link");r.rel="stylesheet",r.href=e,document.head.appendChild(r),r.onload=function(){t(!0)},r.onerror=function(){t(!1)}}))):Promise.resolve()},t.prototype.pageDamageScale=function(){return this.config.width<=0?1:this.config.width/this.pageWidth},t.prototype.pageUnDamageScale=function(){var e=this.jsonPageWidth||this.readerInfo.pageInfo.width;if(e===this.pageWidth||0===e||0===this.pageWidth)return 1;var t=this.pageWidth/e;return t=+t.toFixed(4)},t.prototype.prepareReader=function(e){var t;void 0===e&&(e=!1);var r=Q.call(this),o=K.call(this,e);if(this.renderDocData.readerType===D.ppt&&this.config.pptPadding){var i=this.config.pptPadding,n=i.top,a=i.right,s=i.bottom,c=i.left;o.style.padding=n+"px "+a+"px "+s+"px "+c+"px"}return this.rootEl.appendChild(r),r.appendChild(o),r.appendChild(ee.call(this)),this.renderContext||(this.renderContext={canvas:o,config:this.config}),null===(t=this.emitter)||void 0===t||t.emit("pageReady",this),!0},t.prototype.updatePageWidth=function(e){if(!(e<=0)){var t=this.pageDamageScale(),r=document.getElementById(this.selectorId(w)),o=document.getElementById(this.selectorId(m));r&&o&&(o.style.width=this.pageWidth*t+"px",o.style.height=this.pageHeight*t+"px",r.style.width=this.pageWidth*t+"px")}},t.prototype.updatePageInfoWidth=function(e,t){var r=this;if(void 0===t&&(t=!1),!(e<=0||e===this.pageWidth)){var o=e/this.pageWidth;this.pageWidth=e,this.pageHeight=this.pageHeight*o;var i=this.renderDocData.readerType!==D.ppt,n=function(e){r.nodes.forEach((function(t){t.changeScale(e,i)}))},a=function(e){var t=r.config.dpr,o=e.getContext("2d");o.clearRect(0,0,e.width,e.height),e.width=r.pageWidth*t,e.height=r.pageHeight*t,o.setTransform(t,0,0,t,0,0),e.style.width=r.pageWidth+"px",e.style.height=r.pageHeight+"px"};if(t)n(o);else{var s=document.getElementById(this.selectorId(w)),c=document.getElementById(this.selectorId(m)),d=document.getElementById(this.selectorId(v));if(!s||!c)return;a(c),d&&a(d),s.style.width=this.pageWidth+"px",n(o),this.status!==z.Cleared&&(this.renderImageCanvas=null,this.render())}}},t.prototype.cloneThumbCanvas=function(e){if(0===e)return null;if(!this.nodes||0===this.nodes.length)return null;var t=.4,r=e/this.pageWidth,o=document.createElement("canvas");return o.width=this.pageWidth*t,o.height=this.pageHeight*t,o.style.width=e+"px",o.style.height=this.pageHeight*r+"px",o.style.position="absolute",o.style.left="0",o.style.top="0",o.style.right="0",o.style.bottom="0",o.getContext("2d").setTransform(t,0,0,t,0,0),this.drawThumbImage(0,{canvas:o,config:this.config}),o},t.prototype.selectorId=function(e){return this.config.cssPrefix?this.config.cssPrefix+"-"+e+"-"+this.index:e+"-"+this.index},t.prototype.updateStatus=function(e){var t=this;(this.status=e,e===z.Loading||e===z.Rendering)?this.needAddSkeleton()&&(this.removeErrorEl(),this.rootEl.querySelector("#"+this.selectorId(y))||this.rootEl.querySelector("#"+this.selectorId(w)).appendChild($.call(this))):e===z.Error?(J.call(this),this.addErrorIfNeed(),this.retryCount<2?(this.retryCount++,setTimeout((function(){t.render()}),200)):this.emitError(O.XreaderMaxRetry,"get json error")):e===z.Rendered&&(this.removeErrorEl(),J.call(this))},t.prototype.needAddSkeleton=function(){if(!this.config.limitSkeletonPageRange)return!0;var e=this.config.limitSkeletonPageRange.start,t=this.config.limitSkeletonPageRange.end;return!e&&!t||(t||(t=this.renderDocData.showPage+1),!(this.index>=e&&this.index<t))},t.prototype.drawNode=function(e,t,r){var o=this;if("word"===e.type)(new oe).draw(e,t),r&&r(!0);else if("pic"===e.type){var i=new ne,n=function(n){o.renderImageCanvas&&o.renderImageCanvas.width||o.isResetToDamageMode||[D.ppt,D.xmind].includes(o.renderDocData.readerType)||(o.renderImageCanvas=o.resizeImage(n)),i.drawWithImage(e,t,o.renderImageCanvas||n),r&&r(!0)};this.renderImage?n(this.renderImage):ie(e.src).then((function(e){o.renderImage=e,n(e)})).catch((function(){r&&r(!1)}))}},t.prototype.drawThumbImage=function(e,t){var r=this,o=this.nodes[e];if(o){this.drawNode(o,t,(function(){e+=1,r.drawThumbImage(e,t)}))}},t.prototype.cleanCanvasForce=function(){var e=document.getElementById(this.selectorId(m));e&&e.getContext("2d").clearRect(0,0,e.width,e.height)},t.prototype.startRender=function(){var e,t=this;this.updateStatus(z.Rendering),null===(e=this.emitter)||void 0===e||e.emit("pageBeforeRender",this);var r=function(){t.cleanCanvasForce(),t.nodes.forEach((function(e){t.drawNode(e,t.renderContext)})),function(){var e,r;t.renderedCount+=1,t.updateStatus(z.Rendered),null===(e=t.emitter)||void 0===e||e.emit("pageRendered",t),1===t.index&&1===t.renderedCount&&(null===(r=t.emitter)||void 0===r||r.emit("firstScreenRendered",t.renderDocData))}()},o=this.getPicUrl();this.loadImageIfNeed(o).then((function(){r()})).catch((function(){r()}))},t.prototype.getPicUrl=function(){var e="";if(this.renderDocData.readerType===D.ppt||this.renderDocData.readerType===D.xmind){var t=this.nodes[0];e=null==t?void 0:t.src}else this.renderDocData.readerType===D.xreader&&(e=this.picSrc);return e},t.prototype.resizeImage=function(e){var t=this.pageUnDamageScale();if(1===t)return null;var r=e.width*e.height;if(r/1024/1024>10)return this.toDamageScaleMode(),this.emitError(O.LayoutBigImage,"xreader image to big "+r),null;var o=e.width*t,i=e.height*t,n=document.createElement("canvas");return n.width=o,n.height=i,n.getContext("2d").drawImage(e,0,0,o,i),n},t.prototype.toDamageScaleMode=function(){this.isResetToDamageMode=!0;var e=1/this.pageUnDamageScale(),t=this.renderDocData.readerType!==D.ppt;this.nodes.forEach((function(r){r.changeScale(e,t)})),this.lines.forEach((function(t){t.rect.top*=e,t.rect.left*=e,t.rect.width*=e,t.rect.height*=e}));var r=document.getElementById(this.selectorId(m));if(r){var o=this.config.dpr;r.width=this.readerInfo.pageInfo.width*o,r.height=this.readerInfo.pageInfo.height*o,r.getContext("2d").setTransform(o,0,0,o,0,0)}},t.prototype.parsePPT=function(){var e,t;null===(e=this.emitter)||void 0===e||e.emit("pageBeforeParser",this),this.nodes=function(e){if(!e.renderInfo)throw new Error("renderInfo canot be nil");var t=[],r=new ge;return r.parsePPT(e)&&t.push(r),t}({curPage:this.index,renderInfo:this.readerInfo,config:this.config,renderScale:this.pageUnDamageScale()}),null===(t=this.emitter)||void 0===t||t.emit("pageParsered",this)},t.prototype.parseXreader=function(e){var t,r;null===(t=this.emitter)||void 0===t||t.emit("pageBeforeParser",this);var o=function(e,t){var r;if(!e.renderInfo)throw new Error("renderInfo canot be nil");if(!e.body)throw new Error("body cannot be nul");if(!t)throw new Error("measureCtx must not null");var o=[],i=!1,n=null,a=null,s=[],c=new Map,d=!1;return(null===(r=e.config.keywordInfo.keywordList)||void 0===r?void 0:r.length)&&(d=!0),e.body.forEach((function(r){var l,h,p=null,u=!1;if("word"===r.t){if(u=(p=new ue(t)).parse(r,e)){a&&0===Math.abs(a.pos.y/2-p.pos.y/2)&&n?(n.chars=n.chars.concat(p.chars),n.rect.height=Math.max(n.rect.height,p.pos.h),n.text+=p.content,n.nodes.push(p)):(h=(l=p).chars,n={rect:{top:l.pos.y,left:l.pos.x,width:l.pos.w,height:l.pos.h},chars:h,text:l.content,nodes:[l]},s.push(n));var b=n.chars[0],m=n.chars[n.chars.length-1];b&&m&&(n.rect.width=m.rect.left+m.rect.width-b.rect.left),a=p}if(e.config.keywordEnable&&d&&u){var v=ke(p,e),k=v.isMatch,w=v.subNodes,x=v.keywords,y=v.matchNum,I=void 0===y?0:y;if(k){if(w.forEach((function(e){o.push(e)})),x.length){var P=s.length,C=s[+P-1];C.keywords?C.keywords=g(g([],f(C.keywords)),f(x)):C.keywords=x}c.set(e.curPage,I)}else o.push(p)}else u&&o.push(p)}else{if("pic"!==r.t)throw"the node type error "+r.t;u=(p=new ge).parse(r,e),i=!0,u&&o.push(p)}})),o.sort((function(e,t){return+e.pos.z-+t.pos.z})),s.sort((function(e,t){return e.rect.top-t.rect.top})),{contents:o,textLines:s,isHavePic:i,keywordMatchNum:c}}({fonts:e.font,styles:e.style,body:e.body,page:e.page,curPage:this.index,renderInfo:this.readerInfo,config:this.config,renderScale:this.pageUnDamageScale()},this.measureCtx);this.customFonts=Object.keys(e.font||{}),this.nodes=o.contents,this.lines=o.textLines,this.jsonPageInfo=e.page,this.keywordMatchNum=o.keywordMatchNum.get(this.index)||0,null===(r=this.emitter)||void 0===r||r.emit("pageParsered",this),e.body&&0!==e.body.length||this.emitError(O.XreaderBodyNull,"body null")},t.prototype.clipPageTop=function(e){if(e&&this.config.firstPageTopPadding>=0&&1===this.index){var t=e.cy-this.config.firstPageTopPadding;if(t<0)return;var r=this.rootEl.querySelector("#"+this.selectorId(w));r&&(r.style.marginTop=-t*this.pageUnDamageScale()+"px")}},t.prototype.updatePageHeight=function(e){var t=this,r=this.config.dpr,o=this.pageDamageScale(),i=function(i){var n=document.getElementById(t.selectorId(i));n&&(n.width=t.pageWidth*r,n.height=e*r,n.style.width=t.pageWidth*o+"px",n.style.height=e*o+"px",n.getContext("2d").setTransform(r,0,0,r,0,0))};i(m),i(v)},t}(te),Te=function(e){function t(t){var r=e.call(this,t)||this;return r.updateStatus(z.Inited),r}return a(t,e),t.prototype.render=function(){var e=this;this.updateStatus(z.Loading),this.loadHtmlData().then((function(t){var r,o,i,n;if(t){var a=document.getElementById(e.selectorId(w));if(!a)return;a.innerHTML=t,e.updateStatus(z.Rendered),null===(o=null===(r=e.emitter)||void 0===r?void 0:r.emit)||void 0===o||o.call(r,"firstScreenRendered",e.renderDocData),null===(n=null===(i=e.emitter)||void 0===i?void 0:i.emit)||void 0===n||n.call(i,"pageRendered",e)}else e.updateStatus(z.Error)})).catch((function(){e.updateStatus(z.Error)}))},t.prototype.loadHtmlData=function(){var e=this;return this.config.SSRContent?Promise.resolve(U(this.config.SSRContent)):new Promise((function(t,r){e.readerInfoDataSource.requestIfNeed(e.index).then((function(t){return t?(e.readerInfo=t,t):Promise.reject("[creader] reader info is null")})).then((function(t){var o,n=t.editorDocHtmlUrl;return e.config.useProxy?W({url:"/doc/textcontent",page:e.index,params:{requrl:n}}):n?(o={url:n,page:e.index},new Promise((function(e,t){i.default.get(o.url).then((function(r){r&&r.data?e(r.data):t(r)}))}))):void r("bosurl is null")})).then((function(e){if(e)return t=e,new Promise((function(e){i.default.post("/common/htmlaudit",{html:t}).then((function(r){var o,i;0===(null===(o=null==r?void 0:r.data)||void 0===o?void 0:o.code)&&(null===(i=null==r?void 0:r.data)||void 0===i?void 0:i.html)?e(r.data.html):e(U(t))})).catch((function(){e(U(t))}))}));var t;throw Error("html content null")})).then((function(e){t(e)})).catch((function(e){r(e)}))}))},t.prototype.prepareReader=function(){var e,t=Q.call(this);return this.rootEl.appendChild(t),this.rootEl.appendChild(ee.call(this)),null===(e=this.emitter)||void 0===e||e.emit("pageReady",this),!0},t.prototype.selectorId=function(e){return this.config.cssPrefix?this.config.cssPrefix+"-"+e+"-1":e+"-1"},t.prototype.updateStatus=function(e){var t=this;if(this.status=e,e===z.Loading||e===z.Rendering){if(this.needAddSkeleton()&&(this.removeErrorEl(),!document.getElementById(this.selectorId(y)))){var r=document.getElementById(this.selectorId(w));if(!r)return;r.style.height=this.pageHeight+"px",r.appendChild($.call(this))}}else e===z.Error?(J.call(this),this.addErrorIfNeed(),this.retryCount<2?(this.retryCount++,setTimeout((function(){t.render()}),200)):this.emitError(O.XreaderMaxRetry,"get json error")):e===z.Rendered&&(this.removeErrorEl(),J.call(this),this.changePageElHeight(0))},t.prototype.needAddSkeleton=function(){return!this.config.limitSkeletonPageRange},t}(te),Ee=function(){function e(e){this.datas=new Map,this.loading=!1,this.docId=e.docId,this.renderType=e.renderType,this.config=e.config,this.emitter=e.emitter}return e.prototype.setDataForKey=function(e,t){e&&t&&this.datas.set(e,t)},e.prototype.renderInfoAtPageIndex=function(e){var t,r=this.keyForPage(e);return null===(t=this.datas.get(r))||void 0===t?void 0:t.readerInfo},e.prototype.currentRn=function(){return g([],f(this.datas.keys()))[this.datas.size-1]},e.prototype.requestIfNeed=function(e,t){var r,o,i=this;void 0===t&&(t=!1);var n=this.keyForPage(e),a=this.datas.get(n);if(a){if((new Date).getTime()-a.startTime>3e6)a.startTime=(new Date).getTime();else if(a.readerInfo&&!t)return Promise.resolve(a.readerInfo)}else a={startTime:(new Date).getTime(),requestOnce:new ye},this.setDataForKey(n,a);a.requestOnce||(a.requestOnce=new ye);var s=e;this.config.customPnRn&&(s=((null===(o=null===(r=this.datas.get(n-1))||void 0===r?void 0:r.readerInfo)||void 0===o?void 0:o.showPage)||0)+1);var c=X.bind(this,{docId:this.docId,type:this.renderType,pn:s,rn:this.config.renderInfoRn},this.config.readerInfoAPI);return a.requestOnce.sendPromise(c).then((function(e){var t;return e&&a?(a.readerInfo=e,null===(t=i.emitter)||void 0===t||t.emit("readerInfoUpdated",e),e):null})).catch((function(){return null}))},e.prototype.keyForPage=function(e){return this.config.customPnRn?e<=this.config.startPage?1:Math.ceil((e-this.config.startPage)/this.config.renderInfoRn)+1:Math.ceil(e/this.config.renderInfoRn)},e}();!function(e){e.Up="up",e.Down="down"}(Ie||(Ie={})),function(e){e.Up="up",e.Down="down",e.Move="move"}(Pe||(Pe={}));var Se=0;var Re=function(){function e(e,t){if(this.selectionColor="rgba(17,119,255,0.3)",this.startPoint=null,this.endPoint=null,this.lines=[],this.page=e,this.lines=e.lines||[],t)this.startPoint=t;else{var r=this.firstChar();r&&(this.startPoint={x:r.rect.left,y:r.rect.top})}var o=document.getElementById(this.page.selectorId(v));if(!o){var i=document.getElementById(this.page.selectorId(m));(o=Z.call(e,v)).width=i.width/e.config.dpr,o.height=i.height/e.config.dpr;var n=document.getElementById(e.selectorId(w));n?n.appendChild(o):console.error("[creader] page dom not found",e)}this.interactiveCanvas=o}return e.prototype.lastChar=function(){var e,t=this.lines[this.lines.length-1];return null===(e=null==t?void 0:t.chars)||void 0===e?void 0:e[t.chars.length-1]},e.prototype.firstChar=function(){var e,t=this.lines[0];return null===(e=null==t?void 0:t.chars)||void 0===e?void 0:e[0]},e.prototype.drawTextSelect=function(e){if(this.endPoint=e,this.startCursor=this.geCursor2DLoction(this.startPoint),!this.startCursor){var t=this.geCursor2DLoction(e);if(!t)return!1;this.startPoint=e,this.startCursor=t}var r=this.geCursor2DLoction(e);return r&&(this.endCursor=r),this.render(),!0},e.prototype.drawToLastChar=function(){var e;if(null===(e=this.lines)||void 0===e?void 0:e.length){this.clearContext();var t=this.lines[this.lines.length-1];this.endCursor={lineIndex:this.lines.length-1,charIndex:t.chars.length?t.chars.length-1:0},this.render()}},e.prototype.drawAll=function(){this.clearContext();var e=this.lines[this.lines.length-1];this.startCursor={lineIndex:0,charIndex:0},this.endCursor={lineIndex:this.lines.length-1,charIndex:e.chars.length?e.chars.length-1:0},this.render()},e.prototype.exit=function(){var e;this.startCursor=void 0,this.endCursor=void 0,this.startPoint=null,this.interactiveCanvas&&(null===(e=this.interactiveCanvas.parentNode)||void 0===e||e.removeChild(this.interactiveCanvas))},e.prototype.changeLocation=function(){return this.startCursor&&this.endCursor?{startLineIndex:Math.min(this.startCursor.lineIndex,this.endCursor.lineIndex),endLineIndex:Math.max(this.startCursor.lineIndex,this.endCursor.lineIndex),startCharIndex:Math.min(this.startCursor.charIndex,this.endCursor.charIndex),endCharIndex:Math.max(this.startCursor.charIndex,this.endCursor.charIndex)}:{startLineIndex:0,endLineIndex:0,startCharIndex:0,endCharIndex:0}},e.prototype.render=function(){if(!this.startCursor||!this.endCursor)return!1;var e=this.interactiveCanvas.getContext("2d");e.fillStyle=this.selectionColor;var t=this.startCursor.lineIndex,r=this.endCursor.lineIndex;if(r>t||r===t&&this.endCursor.charIndex>=this.startCursor.charIndex)for(var o=t;o<=r;o++){var i=this.lines[o],n=o===t?i.chars[this.startCursor.charIndex]:i.chars[0],a=o===r?i.chars[this.endCursor.charIndex]:i.chars[i.chars.length-1];this.drawRect(e,{left:n.rect.left,top:n.rect.top,width:a.rect.left+a.rect.width-n.rect.left,height:i.rect.height})}else if(r<t||r===t&&this.endCursor.charIndex<this.startCursor.charIndex)for(o=t;o>=r;o--){i=this.lines[o],n=o===t?i.chars[this.startCursor.charIndex]:i.chars[i.chars.length-1],a=o===r?i.chars[this.endCursor.charIndex]:i.chars[0];this.drawRect(e,{left:a.rect.left,top:a.rect.top,width:n.rect.left+n.rect.width-a.rect.left,height:i.rect.height})}return!0},e.prototype.drawRect=function(e,t){e.fillRect(t.left,t.top,t.width,t.height),e.fill()},e.prototype.isPointInRect=function(e,t){return e.x>=t.left&&e.x<=t.left+t.width&&e.y>=t.top&&e.y<=t.top+t.height},e.prototype.geCursor2DLoction=function(e){if(e){e=this.scalePoint(e);for(var t=0;t<this.lines.length;t++){var r=this.lines[t];if(this.isPointInRect(e,{top:r.rect.top,left:r.rect.left,width:r.rect.width,height:r.rect.height})){for(var o=-1,i=0;i<r.chars.length;i++){var n=r.chars[i];if(this.isPointInRect(e,n.rect))return{lineIndex:t,charIndex:i};e.x>n.rect.left&&(o=i)}return{lineIndex:t,charIndex:-1===o?r.chars.length-1:o}}}}},e.prototype.getSelectedText=function(){var e,t,r,o,i,n,a;if(this.startCursor&&this.endCursor){for(var s=this.changeLocation(),c=s.startLineIndex,d=s.endLineIndex,l=s.startCharIndex,h=s.endCharIndex,p="",u=c;u<=d;u++){var f=this.lines[u];c===d?p=(null===(t=null===(e=f.chars.slice(l,h+1))||void 0===e?void 0:e.map((function(e){return e.text})))||void 0===t?void 0:t.join(""))||"":u===c?p=(null===(o=null===(r=f.chars.slice(l))||void 0===r?void 0:r.map((function(e){return e.text})))||void 0===o?void 0:o.join(""))||"":u===d?(p+="\n",p+=(null===(n=null===(i=f.chars.slice(0,h+1))||void 0===i?void 0:i.map((function(e){return e.text})))||void 0===n?void 0:n.join(""))||""):(p+="\n",p+=(null===(a=f.chars.map((function(e){return e.text})))||void 0===a?void 0:a.join(""))||"")}return p}},e.prototype.clearContext=function(){this.interactiveCanvas.getContext("2d").clearRect(0,0,this.interactiveCanvas.width,this.interactiveCanvas.height)},e.prototype.pointScale=function(){var e=this.page.pageDamageScale();return this.page.isResetToDamageMode&&(e=this.page.config.pageInfoWidth/this.page.readerInfo.pageInfo.width),1/e},e.prototype.scalePoint=function(e){var t=this.pointScale();return 1===t?e:{x:e.x*t,y:e.y*t}},e}(),Me=function(e){var t=e.target;if(t&&t.id){var r=t.id.split("-");if(r.length>1)return Number(r[r.length-1])}return-1};function De(){var t=this,r=0,o=0,i=!1,n=!1,a=!1,s=!0,c=0,d=function(e){return window.TouchEvent&&e instanceof TouchEvent&&1===e.touches.length},l=function(e,t){void 0===t&&(t="changedTouches");var r=0,o=0;if(window.TouchEvent&&e instanceof TouchEvent){var i="changedTouches"===t?e.changedTouches:e.targetTouches,n=e.target;if(i&&n){var a=n.getBoundingClientRect(),s=a.x,c=a.y,d=a.width,l=a.height;r=(i[0].clientX-s)/d*n.offsetWidth,o=(i[0].clientY-c)/l*n.offsetHeight}}else r=e.offsetX,o=e.offsetY;return{x:r,y:o}},h=function(e){if(i=!0,!n&&!s){var h=Me(e),p=t.renderPages[h-1];if(p){var u=t.selectTextMap.get(h);if(u||(u=h===r?new Re(p,l(e,"targetTouches")):new Re(p),t.selectTextMap.set(h,u)),!a)if(u.getSelectedText()){if(d(e)&&Date.now()-c<1200)return;d(e)&&e.stopPropagation(),t.emitter.emit("eventTextSelectStart"),a=!0}n=!0,o=h,function(e){t.clearSelectTextCtx();var i=l(e);if(r===o)null==(a=t.selectTextMap.get(r))||a.drawTextSelect(i);else if(r<o)for(var n=r;n<=o;n++){var a=t.selectTextMap.get(n);n===o?null==a||a.drawTextSelect(i):null==a||a.drawToLastChar()}else for(n=o;n<=r;n++){if(!(a=t.selectTextMap.get(n)))return;if(n===o){var s=a.lastChar();a.startPoint={x:s.rect.left+s.rect.width/2,y:s.rect.top},null==a||a.drawTextSelect(i)}else{var c=a.firstChar();a.drawTextSelect({x:c.rect.left,y:c.rect.top})}}}(e),setTimeout((function(){n=!1}),10)}}},u=function(n){var a,c;if(s=!0,t.readerRootEl.removeEventListener("mousemove",h),i){i=!1;var d=t.getSelectContent();if(d&&d.length){var u=Math.min(r,o),f=Math.max(r,o),g=t.selectTextMap.get(u),b=t.selectTextMap.get(f);if(!g||!b)return;var m={text:d,start:{page:u,x:(null===(a=g.startPoint)||void 0===a?void 0:a.x)||0,y:(null===(c=g.startPoint)||void 0===c?void 0:c.y)||0},end:p({page:f},l(n)),renderMode:t.config.renderMode||e.CRRenderMode.Canvas};t.emitter.emit("eventTextSelected",m)}t.emitter.emit("eventTextSelectEnd")}},f=function(e){if(i=!1,setTimeout((function(){s=!1}),300),e instanceof MouseEvent&&2===e.button)e.preventDefault();else if(!function(e){return window.TouchEvent&&e instanceof TouchEvent&&e.touches.length>1}(e)){c=Date.now();var o=Me(e);if(t.renderPages[o-1]){t.clearSelectTextCtx(),t.clearSelectText(),a=!1,t.emitter.emit("eventTextCanceled"),r=o,t.readerRootEl.removeEventListener("mousemove",h),t.readerRootEl.addEventListener("mousemove",h),t.readerRootEl.addEventListener("mouseup",u);try{t.readerRootEl.removeEventListener("touchmove",h),t.readerRootEl.addEventListener("touchmove",h),t.readerRootEl.addEventListener("touchend",u)}catch(e){}}}};if(this.config.textSelectEnable){this.readerRootEl.addEventListener("mousedown",f);try{this.readerRootEl.addEventListener("touchstart",f)}catch(e){}}}function Le(){var t=this,r=0,o=0,i=0,n=0,a=function(e){var a=function(e){var r;if(!e||(null===(r=e.classList)||void 0===r?void 0:r.contains("fr-view")))return null;var o,i=t.rootEl.getBoundingClientRect();return o=e.getBoundingClientRect().top-i.top+t.rootEl.scrollTop,{x:i.width/2,y:o}}(e.target);a&&(r&&o||(r=a.x,o=a.y),i=a.x,n=a.y)};this.config.textSelectEnable&&(this.readerRootEl.addEventListener("mousedown",(function(){t.readerRootEl.addEventListener("mousemove",a)})),this.readerRootEl.addEventListener("mouseup",(function(){t.readerRootEl.removeEventListener("mousemove",a);var s,c=(s=window.getSelection())&&s.rangeCount?s.getRangeAt(0):null;if(c){var d=null==c?void 0:c.toString();if(d&&d.length&&(r||o)){var l={text:d,start:{page:1,x:r,y:Math.min(o,n)},end:{page:1,x:i,y:Math.max(o,n)},renderMode:t.config.renderMode||e.CRRenderMode.HTML};t.emitter.emit("eventTextSelected",l)}}})))}function Be(){var e=this,t=null,r=null,o=this.config.keywordInfo,i=0,n=function(r){var o=r.pageIndex,i=r.xstart,n=r.xend,a=r.yend,s=r.color,c=r.scaleX,d=e.renderPages[o-1];if(!(t=document.getElementById(d.selectorId(k)))){var l=document.getElementById(d.selectorId(m));(t=Z.call(d,k)).width=l.width/d.config.dpr,t.height=l.height/d.config.dpr;var h=document.getElementById(d.selectorId(w));h?h.appendChild(t):console.error("[creader] page dom not found",o)}var p=t.getContext("2d");p.save(),p.beginPath(),c&&1!==c&&p.scale(c,1),p.moveTo(i,a),p.lineTo(n,a),p.lineWidth=1,p.strokeStyle=s,p.stroke(),p.restore()},a=function(){t&&(t.getContext("2d").clearRect(0,0,t.width,t.height),t.width=t.width)},s=function(e,t){document.getElementsByClassName(w)[e-1].style.cursor=t},c=function(){var t=(null==r?void 0:r.text)||"";t&&(e.emitter.emit("keywordClickEvent",t),a(),r=null)};this.readerRootEl.addEventListener("mousemove",(function(t){var d=Me(t),l=e.renderPages[d-1];if(l){d!==i&&(!function(){var t,r=e.renderPages[i-1];if(r){var o=document.getElementById(r.selectorId(k));o&&(null===(t=o.parentNode)||void 0===t||t.removeChild(o))}}(),i=d);for(var h,p,u={x:t.offsetX,y:t.offsetY},f=l.lines,g=0;g<f.length;g++){var b=f[g];if(h=u,p=b.rect,h.x>=p.left&&h.x<=p.left+p.width&&h.y>=p.top&&h.y<=p.top+p.height){for(var m=b.keywords||[],v=void 0,w=void 0,x=0;x<m.length;x++){var y=m[x];if(w=(v=y.x)+y.w,u.x>=v&&u.x<=w){a();var I={pageIndex:d,xstart:v,xend:w,yend:y.y+y.h,color:o.underlineColor,text:y.text,scaleX:y.scaleX};return n(I),s(d,"pointer"),e.readerRootEl.removeEventListener("click",c),e.readerRootEl.addEventListener("click",c),r=I,!1}a(),s(d,"text"),e.readerRootEl.removeEventListener("click",c),r=null}return!1}a(),s(d,"text"),e.readerRootEl.removeEventListener("click",c),r=null}}}))}var Ne,Oe=void 0,ze=function(){function t(e){var t;this.readerDocData={page:0,showPage:0,freePage:0,readerType:D.xreader,pageRenderWidth:0,pageRenderHeight:0,pageOriginalWidth:0},this.lazyPageMap=new Map,this.renderPages=[],this.rootLine=I,this.selectTextMap=new Map,this.installedPlugins=new Set,this.intersectionObserver=null,this.renderedPageSet=new Set,this.viewportPageSet=new Set,this.config=e.config||C,this.mergeConfig(),this.root=e.root,this.rootEl=this.findRootEl(e),this.readerRootEl=G(this.config),this.rootEl.appendChild(this.readerRootEl),this.docId=e.docId,this.measureCtx=((t=document.createElement("canvas")).width=32,t.height=32,t.getContext("2d")),this.emitter=e.emitter||r.mitt(),this.dataSource=new Ee({docId:this.docId,renderType:M.HTML,config:this.config,emitter:this.emitter}),this.addPluginEvent()}return t.prototype.beginReader=function(t){var o=this;return new Promise((function(i,n){var a=function(t){if(t){if(!o.isSupport(t))return Oe.addToCReader({content:"not support this type doc: "+t.readerType,type:xe.Error}),void console.error("[creader] not support this type doc",t.readerType,t.docId);if(o.mergeReaderInfo(t),o.readerDocData={page:t.page,showPage:t.showPage,freePage:t.freePage,readerType:t.readerType,pageRenderWidth:t.pageInfo.width,pageRenderHeight:t.pageInfo.height,pageOriginalWidth:t.pageInfo.width},o.config.pageInfoWidth>0){o.readerDocData.pageRenderWidth=o.config.pageInfoWidth;var n=o.config.pageInfoWidth/t.pageInfo.width;o.readerDocData.pageRenderHeight=t.pageInfo.height*n}o.config.renderMode!==e.CRRenderMode.HTML&&o.initIntersectionObserver(),o.emitter.emit("readerInfoFinish",t);var a,s,c,d,l=o.startPageCount();if(o.loadNextPage(l,1),o.config.loadMoreType===e.CRLoadMoreType.Scroll)a=o.rootEl,s=200,c=o.didScroll.bind(o),d=r.throttle(s,(function(){var e=a.scrollHeight-a.clientHeight-a.scrollTop,t=Se>a.scrollTop?Ie.Up:Ie.Down;Se=a.scrollTop,c({toBottomHeight:e,toTopHeight:Se,direction:t})})),a.addEventListener("scroll",d);else if(o.config.loadMoreType===e.CRLoadMoreType.Fold){var h=function(){var e=document.createElement("div");return e.className="creader-fold",e.innerHTML='<div class="creader-fold__content">\n        <div id="creader-fold-text" class="creader-fold__text"></div>\n    </div>',e}();o.readerRootEl.appendChild(h),o.updateFoldText(),o.addFoldEvent()}i(!0)}else o.emitError(O.RenderInfoLoadFail,"can't get readerInfo")},s=function(t,r){if(void 0===r&&(r=!0),window.IntersectionObserver||o.config.renderMode===e.CRRenderMode.HTML)a(t);else{(i="https://edu-wenku.bdimg.com/v1/wksmallApp/intersection-observer-min-1638168222751.js",new Promise((function(e){var t=document.getElementsByTagName("head")[0],r=document.createElement("script");r.setAttribute("src",i),r.setAttribute("type","text/javascript"),r.onload=function(){e(!0)},r.onerror=function(){e(!1)},t.appendChild(r)}))).then((function(e){e?a(t):r&&setTimeout((function(){s(t,!1)}),1e3)}))}var i};t?(o.dataSource.setDataForKey(o.dataSource.keyForPage(1),{readerInfo:t,startTime:(new Date).getTime()}),s(t)):o.dataSource.requestIfNeed(1).then((function(e){s(e)})).catch((function(e){o.emitError(O.RenderInfoLoadFail,"request readerInfo error: "+e),n(e)}))}))},t.prototype.resetReader=function(e){var t;this.readerDocData={page:0,showPage:0,freePage:0,readerType:D.xreader,pageRenderWidth:0,pageRenderHeight:0,pageOriginalWidth:0},this.lazyPageMap=new Map,this.renderPages=[],this.docId=e,this.renderedPageSet=new Set,this.viewportPageSet=new Set,this.dataSource=new Ee({docId:this.docId,renderType:M.HTML,config:this.config,emitter:this.emitter}),null===(t=this.readerRootEl.parentElement)||void 0===t||t.removeChild(this.readerRootEl),this.readerRootEl=G(this.config),this.rootEl.appendChild(this.readerRootEl),window.__CRjsonpRequestMap||(window.__CRjsonpRequestMap=new Map)},t.prototype.on=function(e,t){return this.emitter.on(e,t)},t.prototype.off=function(e){return this.emitter.off(e)},t.prototype.prepareHtmlPage=function(){if(!this.canNext())return!1;var e=new Te({index:1,rootEl:this.readerRootEl,config:this.config,emitter:this.emitter,renderDocData:this.readerDocData,readerInfoDataSource:this.dataSource});e.prepareReader(),e.render(),this.renderPages.push(e)},t.prototype.preparePage=function(e,t){var r;if(e<this.renderPages.length)return!1;if(!this.canNext(t))return!1;var o=this.lazyPageMap.get(e);o?this.lazyPageMap.delete(e):o=new Ce({index:e,rootEl:this.readerRootEl,config:this.config,emitter:this.emitter,renderDocData:this.readerDocData,measureCtx:this.measureCtx,readerInfoDataSource:this.dataSource});var i=e<=this.config.startPage;o.prepareReader(i),this.renderPages.push(o),i&&(o.render(),this.renderedPageSet.add(e));var n=document.getElementById(o.selectorId(m));return n&&(null===(r=this.intersectionObserver)||void 0===r||r.observe(n)),!0},t.prototype.prepareLazyPage=function(e){var t,r=this;if(e>this.readerDocData.showPage)return Promise.reject("invalid page index");if(e-1<this.renderPages.length)return Promise.resolve();var o=function(e){return r.readerDocData.readerType===D.xreader?e.loadXreaderContent():r.readerDocData.readerType===D.txt?e.loadTxtContent():Promise.resolve()};if(this.lazyPageMap.has(e)){var i=this.lazyPageMap.get(e);return i&&(null===(t=i.nodes)||void 0===t?void 0:t.length)<=0?o(i):Promise.resolve()}var n=new Ce({index:e,rootEl:this.readerRootEl,config:this.config,isLazy:!0,emitter:this.emitter,renderDocData:this.readerDocData,measureCtx:this.measureCtx,readerInfoDataSource:this.dataSource});return this.lazyPageMap.set(e,n),o(n)},t.prototype.loadNextPage=function(e,t){void 0===t&&(t=0);for(var r=this.renderPages.length+1,o=0;o<e&&r+o<=this.readerDocData.showPage;o++)this.readerDocData.readerType===D.html?this.prepareHtmlPage():this.preparePage(r+o);if(t>0&&this.config.lazyLoadEnable){var i=this.renderPages.length+1;for(o=0;o<e&&i+o<=this.readerDocData.showPage;o++)this.prepareLazyPage(i+o)}},t.prototype.gotoPage=function(e){var t=this.readerDocData.showPage;if(e<1)return!1;if(this.config.customPnRn&&(t=e),this.readerDocData.readerType===D.html)return!1;var r=this.renderPages.length;if(e<=r)return!1;for(var o=this.renderPages.length+1,i=e-r,n=0;n<i&&o+n<=t;n++)this.preparePage(o+n,t);return!0},t.prototype.scrollToPage=function(e){if(e.toPageIndex<=0)return console.warn("toPageIndex must more than 0"),!1;var t=this.renderPages[e.toPageIndex-1];if(!t)return!1;var r=document.getElementById(t.selectorId(w));if(!r)return!1;var o=e.fixedTop||0;if(e.containerSelector){var i=document.querySelector(e.containerSelector);if(!i)return console.warn("not found scroll container"),!1;var n=i.scrollTop||0,a=i.scrollLeft||0;n+=(r.getBoundingClientRect().top||0)-o,i.scrollTo(a,n)}else{var s=document.documentElement,c=document.body;n=s.scrollTop||c.scrollTop||window.pageYOffset||0,a=s.scrollLeft||c.scrollLeft||0;n+=r.getBoundingClientRect().top-o,window.scrollTo(a,n)}return!0},t.prototype.use=function(e,t){var r;return this.installedPlugins.has(e)||(null===(r=e.install)||void 0===r||r.call(e,t),this.installedPlugins.add(e)),e},t.prototype.curPage=function(){return this.renderPages.length},t.prototype.lastPageCount=function(){return this.readerDocData.page-this.curPage()},t.prototype.canNext=function(e){return e||(e=this.readerDocData.showPage),!(this.curPage()+1>this.readerDocData.page)&&this.curPage()+1<=e},t.prototype.viewportPage=function(){var e=Array.from(this.viewportPageSet);if(!e)return 1;var t=e[e.length-1],r=this.renderPages[t-1];return t<1||!r?1:t},t.prototype.startPageCount=function(){return this.readerDocData.readerType===D.ppt||this.readerDocData.readerType===D.xmind?Math.min(this.config.pptStartPage,this.readerDocData.showPage):Math.min(this.config.startPage,this.readerDocData.showPage)},t.prototype.setViewerMode=function(e,t){var r=this;if(void 0===t&&(t=!1),this.config.viewerMode===e)return!1;this.config.viewerMode=e;var o=this.pageViewerCount();return t?this.readerRootEl.style.width=this.readerDocData.pageRenderWidth*o+"px":this.setPageInfoWidth(this.readerDocData.pageRenderWidth/o),this.renderPages.forEach((function(e){var t=r.rootEl.querySelector("#"+e.selectorId(m));if(t){var i=e.pageDamageScale();if(t.style.width=e.pageWidth*i+"px",t.style.height=e.pageHeight*i+"px",o>1)t.style.padding="0";else if(r.config.pptPadding){var n=r.config.pptPadding,a=n.top,s=n.right,c=n.bottom,d=n.left;t.style.padding=a+"px "+s+"px "+c+"px "+d+"px"}}})),!0},t.prototype.pageViewerCount=function(){return this.config.viewerMode===e.CRViewerMode.VDoublePage?2:1},t.prototype.didScroll=function(e){e.toBottomHeight<150&&this.loadNextPage(this.config.foldOpenCount,2),this.emitter.emit("eventScroll",e)},t.prototype.setWidth=function(t){this.config.renderMode!==e.CRRenderMode.Canvas&&(t<=50||this.config.width===t||(this.config.width=t,this.renderPages.forEach((function(e){e.updatePageWidth(t)}))))},t.prototype.setPageInfoWidth=function(t){var r,o;if(this.config.renderMode===e.CRRenderMode.Canvas&&!(t<=50)){var i=this.pageViewerCount(),n=t/this.readerDocData.pageRenderWidth;this.readerDocData.pageRenderWidth=t,this.readerDocData.pageRenderHeight*=n,this.readerRootEl.style.width=t*i+"px";var a=function(e){setTimeout((function(){e.updatePageInfoWidth(t,!0)}),0)};try{for(var s=u(this.lazyPageMap.values()),c=s.next();!c.done;c=s.next()){a(c.value)}}catch(e){r={error:e}}finally{try{c&&!c.done&&(o=s.return)&&o.call(s)}finally{if(r)throw r.error}}this.renderPages.forEach((function(e){setTimeout((function(){e.updatePageInfoWidth(t)}),0)}))}},t.prototype.clearSelectTextCtx=function(){g([],f(this.selectTextMap.values())).forEach((function(e){e.clearContext()}))},t.prototype.getPageIndex=function(e){var t=e.target;if(t&&t.id){var r=t.id.split("-");if(r.length>1)return Number(r[r.length-1])}return-1},t.prototype.isSupport=function(e){return!![D.xreader,D.ppt,D.xmind,D.txt,D.html].includes(e.readerType)},t.prototype.getSelectContent=function(){if(this.selectTextMap.size){var e=[],t=g([],f(this.selectTextMap.values()));return t.sort((function(e,t){return e.page.index-t.page.index})),t.forEach((function(t){var r=t.getSelectedText();r&&e.push(r)})),e.join("\n")}},t.prototype.clearSelectText=function(){var e,t;try{for(var r=u(this.selectTextMap.values()),o=r.next();!o.done;o=r.next()){o.value.exit()}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}this.selectTextMap.clear()},t.prototype.addPluginEvent=function(){var t=this;this.emitter.on("pageBeforeRender",(function(e){t.installedPlugins.forEach((function(t){var r;null===(r=t.pageBeforeRender)||void 0===r||r.call(t,e)}))})),this.emitter.on("pageRendered",(function(r){t.installedPlugins.forEach((function(e){var t;null===(t=e.pageRendered)||void 0===t||t.call(e,r)})),t.config.renderMode===e.CRRenderMode.Canvas?1===r.index&&1===r.renderedCount&&(t.config.textSelectEnable&&De.call(t),t.config.keywordEnable&&Be.call(t),t.addContentMenuEvent()):Le.call(t)})),this.emitter.on("pageBeforeParser",(function(e){t.installedPlugins.forEach((function(t){var r;null===(r=t.pageBeforeParser)||void 0===r||r.call(t,e)}))})),this.emitter.on("pageParsered",(function(e){t.installedPlugins.forEach((function(t){var r;null===(r=t.pageParsered)||void 0===r||r.call(t,e)}))}))},t.prototype.getReaderSet=function(){for(var t=this.config.viewerMode===e.CRViewerMode.VSignalPage?2:4,r=t,o=t,i=Array.from(this.viewportPageSet),n=i[0],a=i[i.length-1],s=1;s<=r;s++){var c=n-s;c>0&&i.unshift(c)}for(s=1;s<=o;s++){var d=a+s;d<=this.renderPages.length&&i.push(d)}return new Set(i)},t.prototype.initIntersectionObserver=function(){var t=this;this.intersectionObserver=new IntersectionObserver((function(r){var o,i,n,a;r.forEach((function(r){var o,i=r.target;if(i&&(null===(o=i.id)||void 0===o?void 0:o.includes(m))){var n=i.id.split("-"),a=+n[n.length-1];if(t.renderPages[a-1])if(r.isIntersecting?t.viewportPageSet.add(a):t.viewportPageSet.delete(a),t.config.renderFlow===e.CRRenderFlow.UnDestroy){if(!t.renderedPageSet.has(a)){var s=t.renderPages[a-1];s&&s.renderResizeCanvas(),t.renderedPageSet.add(a)}}else t.config.renderFlow===e.CRRenderFlow.Viewport||console.error("[creader] CRRenderFlow value error",t.config.renderFlow)}}));var s=Array.from(t.viewportPageSet);if(s.sort((function(e,t){return e-t})),t.viewportPageSet=new Set(s),t.config.renderFlow===e.CRRenderFlow.Viewport){var c=t.getReaderSet();try{for(var d=u(t.renderedPageSet),l=d.next();!l.done;l=d.next()){var h=l.value;if(!c.has(h))(g=t.renderPages[h-1])&&g.clearCanvas()}}catch(e){o={error:e}}finally{try{l&&!l.done&&(i=d.return)&&i.call(d)}finally{if(o)throw o.error}}try{for(var p=u(c),f=p.next();!f.done;f=p.next()){var g,b=f.value;(g=t.renderPages[b-1])&&g.renderResizeCanvas()}}catch(e){n={error:e}}finally{try{f&&!f.done&&(a=p.return)&&a.call(p)}finally{if(n)throw n.error}}t.renderedPageSet=new Set(c)}}))},t.prototype.updateFoldText=function(){var e,t=this.lastPageCount(),r=document.getElementById("creader-fold-text");if(r)if(this.curPage()>=this.readerDocData.showPage&&t>0)r.innerText="试读已结束， 剩余"+t+"页未读";else if(t>0)r.innerHTML="剩余 "+t+' 页未读，<span class="creader-fold__read-all">继续阅读</span>';else{var o=document.querySelector(".creader-fold");o&&(null===(e=o.parentNode)||void 0===e||e.removeChild(o))}},t.prototype.addFoldEvent=function(){var e=this,t=document.getElementById("creader-fold-text");if(t){var r=function(){e.emitter.emit("foldClicked"),e.config.foldCanOpen&&e.canNext()&&(e.loadNextPage(e.config.foldOpenCount,2),e.updateFoldText())};t.removeEventListener("click",r),t.addEventListener("click",r)}},t.prototype.findRootEl=function(e){var t=null;if("string"==typeof this.root){var r=document.getElementById(e.root);if(!r)throw"The "+e.root+" must be id selector and exist in document, eg: reader-view";t=r}else t=e.root;if(!t)throw"You must provide a root element use root proterty";return t},t.prototype.mergeConfig=function(){(!this.config.pptStartPage||this.config.pptStartPage<=0)&&(this.config.pptStartPage=this.config.startPage||5)},t.prototype.mergeReaderInfo=function(t){t.pageInfo.width||(t.pageInfo.width=945),t.pageInfo.height||(t.pageInfo.height=1336),this.config.customPnRn||(t.readerType===D.xreader&&t.jsons.length<10&&t.jsons.length<t.showPage?t.showPage=t.jsons.length:(t.readerType===D.ppt||t.readerType===D.xmind)&&t.urls.length<10&&t.urls.length<t.showPage?t.showPage=t.urls.length:t.readerType===D.html&&(t.showPage=1,this.config.renderMode=e.CRRenderMode.HTML))},t.prototype.emitError=function(e,t){this.emitter.emit("error",{code:e,message:t})},t.prototype.addContentMenuEvent=function(){var e=this;this.readerRootEl.addEventListener("contextmenu",(function(t){t.preventDefault(),e.emitter.emit("eventContextMenu",t)}))},t}();!function(e){e[e.RightBottom=0]="RightBottom"}(Ne||(Ne={}));var _e=new(function(){function t(){this.fontSize=16,this.edge=50,this.textColor="#000000"}return t.prototype.install=function(e){this.options=e,this.cacheImage=null},t.prototype.pageRendered=function(t){t.config.renderMode===e.CRRenderMode.Canvas?this.addWatermarkToCanvas(t):this.addWatermarkToDiv(t)},t.prototype.addWatermarkToDiv=function(e){var t=document.getElementById(e.selectorId(w));if(t){var r=this.options,o=document.createElement("div");o.classList.add("watermark-container"),t.appendChild(o);var i=document.createElement("p");i.classList.add("watermark-text"),i.style.color="#cdcdcd",i.style.marginRight=this.edge+"px";var n=r.text;if(n&&(i.innerText=n),o.appendChild(i),r.imgSrc){var a=document.createElement("img");a.classList.add("watermark-img"),a.src=r.imgSrc,a.style.marginRight=this.edge+"px",o.appendChild(a)}}},t.prototype.addWatermarkToCanvas=function(e){var t,r=this,o=e.renderContext.canvas.getContext("2d");if(o){var i=e.pageWidth,n=e.pageHeight,a=this.options,s=e.config.pageInfoWidth/945,c=0;e.renderDocData.readerType===D.ppt&&(s=1,c=(null===(t=e.config.pptPadding)||void 0===t?void 0:t.right)||0);var d=function(e){if(a.text){var t=a.text;o.save(),o.textBaseline="middle",o.fillStyle=r.textColor,o.font="500 "+r.fontSize*s+"px sans-serif";var d=o.measureText(a.text).width,l=i-d-r.edge*s-c,h=n-e-(r.edge+r.fontSize)*s;o.globalAlpha=.25,o.fillText(t,l,h),o.restore()}};if(a.imgSrc){var l=function(e){var t=(a.imgScale||.2)*s,l=e.width*t,h=e.height*t,p=i-l-r.edge*s-c,u=n-h-r.edge*s;o.drawImage(e,p,u,l,h),a.text&&d(h)};this.cacheImage?l(this.cacheImage):ie(a.imgSrc).then((function(e){r.cacheImage=e,l(e)}))}else a.text&&d(0)}},t}());r.n('.creader-fold{position:absolute;bottom:0;left:0;right:0;z-index:200;width:100%;text-align:center;box-sizing:border-box;background-image:linear-gradient(90deg,#fff,hsla(0,0%,100%,.99),hsla(0,0%,100%,.95),hsla(0,0%,100%,0));background-image:-webkit-linear-gradient(90deg,#fff,hsla(0,0%,100%,.99),hsla(0,0%,100%,.95),hsla(0,0%,100%,0));background-color:#fff 0}@media (-ms-high-contrast:none),screen and (-ms-high-contrast:active){.creader-fold{background-image:linear-gradient(0deg,#fff,hsla(0,0%,100%,.99),hsla(0,0%,100%,.95),hsla(0,0%,100%,0))}}.creader-fold__content{padding-top:158px;margin-bottom:60px}.creader-fold__text{cursor:pointer;font-size:16px;line-height:36px;margin-top:15px;color:#222}.creader-fold__read-all{color:#22ab82;padding-right:18px;background-repeat:no-repeat;background-image:url(https://edu-wenku.bdimg.com/v1/wkSmallApp/pc/arrow-1635842480553.svg);background-position:100% 50%}.creader-fold__read-all:hover{color:#1c9f78}\n/*!\n * froala_editor v2.8.1 (https://www.froala.com/wysiwyg-editor)\n * License https://froala.com/wysiwyg-editor/terms/\n * Copyright 2014-2018 Froala Labs\n */.clearfix:after{clear:both;display:block;content:"";height:0}.hide-by-clipping{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}.fr-img-caption.fr-rounded img,img.fr-rounded{-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;-webkit-background-clip:padding-box;-moz-background-clip:padding;background-clip:padding-box}.fr-img-caption.fr-bordered img,img.fr-bordered{border:5px solid #ccc}img.fr-bordered{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box}.fr-img-caption.fr-bordered img{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.fr-img-caption.fr-shadow img,img.fr-shadow{-webkit-box-shadow:0 1px 3px rgba(0,0,0,.12),0 1px 1px 1px rgba(0,0,0,.16);-moz-box-shadow:0 1px 3px rgba(0,0,0,.12),0 1px 1px 1px rgba(0,0,0,.16);box-shadow:0 1px 3px rgba(0,0,0,.12),0 1px 1px 1px rgba(0,0,0,.16)}.fr-view span[style~="color:"] a{color:inherit}.fr-view table{border:0;border-collapse:collapse;empty-cells:show;max-width:100%;table-layout:fixed}.fr-view table td{min-width:5px}.fr-view table.fr-dashed-borders td,.fr-view table.fr-dashed-borders th{border-style:dashed}.fr-view table.fr-alternate-rows tbody tr:nth-child(2n){background:#f4f4f4}.fr-view table td,.fr-view table th{border:1px solid #ddd}.fr-view table td:empty,.fr-view table th:empty{height:20px}.fr-view table td.fr-highlighted,.fr-view table th.fr-highlighted{border:1px double red}.fr-view table td.fr-thick,.fr-view table th.fr-thick{border-width:2px}.fr-view table th{background:#e6e6e6}.fr-view hr{clear:both;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;page-break-after:always}.fr-view .fr-file{position:relative}.fr-view .fr-file:after{position:relative;content:"\\1F4CE";font-weight:400}.fr-view pre{white-space:pre-wrap;word-wrap:break-word;overflow:visible}.fr-view[dir=rtl] blockquote{border-left:0;border-right:2px solid #5e35b1;margin-right:0;padding-right:5px;padding-left:0}.fr-view[dir=rtl] blockquote blockquote{border-color:#00bcd4}.fr-view[dir=rtl] blockquote blockquote blockquote{border-color:#43a047}.fr-view blockquote{border-left:2px solid #5e35b1;margin-left:0;padding-left:5px;color:#5e35b1}.fr-view blockquote blockquote{border-color:#00bcd4;color:#00bcd4}.fr-view blockquote blockquote blockquote{border-color:#43a047;color:#43a047}.fr-view span.fr-emoticon{font-weight:400;font-family:Apple Color Emoji,Segoe UI Emoji,NotoColorEmoji,Segoe UI Symbol,Android Emoji,EmojiSymbols;display:inline;line-height:0}.fr-view span.fr-emoticon.fr-emoticon-img{background-repeat:no-repeat!important;font-size:inherit;height:1em;width:1em;min-height:20px;min-width:20px;display:inline-block;margin:-.1em .1em .1em;line-height:1;vertical-align:middle}.fr-view .fr-text-gray{color:#aaa!important}.fr-view .fr-text-bordered{border-top:1px solid #222;border-bottom:1px solid #222;padding:10px 0}.fr-view .fr-text-spaced{letter-spacing:1px}.fr-view .fr-text-uppercase{text-transform:uppercase}.fr-view img{position:relative;max-width:100%}.fr-view img.fr-dib{margin:5px auto;display:block;float:none;vertical-align:top}.fr-view img.fr-dib.fr-fil{margin-left:0;text-align:left}.fr-view img.fr-dib.fr-fir{margin-right:0;text-align:right}.fr-view img.fr-dii{display:inline-block;float:none;vertical-align:bottom;margin-left:5px;margin-right:5px;max-width:calc(100% - 10px)}.fr-view img.fr-dii.fr-fil{float:left;margin:5px 5px 5px 0;max-width:calc(100% - 5px)}.fr-view img.fr-dii.fr-fir{float:right;margin:5px 0 5px 5px;max-width:calc(100% - 5px)}.fr-view span.fr-img-caption{position:relative;max-width:100%}.fr-view span.fr-img-caption.fr-dib{margin:5px auto;display:block;float:none;vertical-align:top}.fr-view span.fr-img-caption.fr-dib.fr-fil{margin-left:0;text-align:left}.fr-view span.fr-img-caption.fr-dib.fr-fir{margin-right:0;text-align:right}.fr-view span.fr-img-caption.fr-dii{display:inline-block;float:none;vertical-align:bottom;margin-left:5px;margin-right:5px;max-width:calc(100% - 10px)}.fr-view span.fr-img-caption.fr-dii.fr-fil{float:left;margin:5px 5px 5px 0;max-width:calc(100% - 5px)}.fr-view span.fr-img-caption.fr-dii.fr-fir{float:right;margin:5px 0 5px 5px;max-width:calc(100% - 5px)}.fr-view .fr-video{text-align:center;position:relative}.fr-view .fr-video>*{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;max-width:100%;border:0}.fr-view .fr-video.fr-dvb{display:block;clear:both}.fr-view .fr-video.fr-dvb.fr-fvl{text-align:left}.fr-view .fr-video.fr-dvb.fr-fvr{text-align:right}.fr-view .fr-video.fr-dvi{display:inline-block}.fr-view .fr-video.fr-dvi.fr-fvl{float:left}.fr-view .fr-video.fr-dvi.fr-fvr{float:right}.fr-view a.fr-strong{font-weight:700}.fr-view a.fr-green{color:green}.fr-view .fr-img-caption{text-align:center}.fr-view .fr-img-caption .fr-img-wrap{padding:0;display:inline-block;margin:auto;text-align:center;width:100%}.fr-view .fr-img-caption .fr-img-wrap img{display:block;margin:auto;width:100%}.fr-view .fr-img-caption .fr-img-wrap>span{margin:auto;display:block;padding:5px 5px 10px;font-size:14px;font-weight:400;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-opacity:.9;-moz-opacity:.9;opacity:.9;-ms-filter:"alpha(Opacity=0)";width:100%;text-align:center}.fr-view button.fr-rounded,.fr-view input.fr-rounded,.fr-view textarea.fr-rounded{-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;-webkit-background-clip:padding-box;-moz-background-clip:padding;background-clip:padding-box}.fr-view button.fr-large,.fr-view input.fr-large,.fr-view textarea.fr-large{font-size:24px}a.fr-view.fr-strong{font-weight:700}a.fr-view.fr-green{color:green}img.fr-view{position:relative;max-width:100%}img.fr-view.fr-dib{margin:5px auto;display:block;float:none;vertical-align:top}img.fr-view.fr-dib.fr-fil{margin-left:0;text-align:left}img.fr-view.fr-dib.fr-fir{margin-right:0;text-align:right}img.fr-view.fr-dii{display:inline-block;float:none;vertical-align:bottom;margin-left:5px;margin-right:5px;max-width:calc(100% - 10px)}img.fr-view.fr-dii.fr-fil{float:left;margin:5px 5px 5px 0;max-width:calc(100% - 5px)}img.fr-view.fr-dii.fr-fir{float:right;margin:5px 0 5px 5px;max-width:calc(100% - 5px)}span.fr-img-caption.fr-view{position:relative;max-width:100%}span.fr-img-caption.fr-view.fr-dib{margin:5px auto;display:block;float:none;vertical-align:top}span.fr-img-caption.fr-view.fr-dib.fr-fil{margin-left:0;text-align:left}span.fr-img-caption.fr-view.fr-dib.fr-fir{margin-right:0;text-align:right}span.fr-img-caption.fr-view.fr-dii{display:inline-block;float:none;vertical-align:bottom;margin-left:5px;margin-right:5px;max-width:calc(100% - 10px)}span.fr-img-caption.fr-view.fr-dii.fr-fil{float:left;margin:5px 5px 5px 0;max-width:calc(100% - 5px)}span.fr-img-caption.fr-view.fr-dii.fr-fir{float:right;margin:5px 0 5px 5px;max-width:calc(100% - 5px)}.fr-view{padding:60px 20px 20px;font-size:16px}.fr-view h1,.fr-view h2,.fr-view h3,.fr-view li,.fr-view ol,.fr-view p,.fr-view ul{margin:6px 0}.fr-view ul{list-style:disc;padding-left:40px}.fr-view ol{list-style:decimal;padding-left:40px}.fr-view em{font-weight:inherit}.fr-view strong{font-style:inherit;font-weight:700}.fr-view h1{font-size:22px}.fr-view h1,.fr-view h2{color:#000;font-weight:700}.fr-view h2{font-size:20px}.fr-view h3{font-size:18px;color:#000;font-weight:700}@-moz-keyframes EpubLineLoading{0%{background-position:0 75%}50%{background-position:100% 25%}to{background-position:0 75%}}@-webkit-keyframes EpubLineLoading{0%{background-position:0 75%}50%{background-position:100% 25%}to{background-position:0 75%}}@-o-keyframes EpubLineLoading{0%{background-position:0 75%}50%{background-position:100% 25%}to{background-position:0 75%}}@keyframes EpubLineLoading{0%{background-position:0 75%}50%{background-position:100% 25%}to{background-position:0 75%}}.creader-pageloading-wrap{position:absolute;left:0;top:0;right:0;bottom:0;box-sizing:border-box;padding:54px;overflow:hidden;background-color:#fff}.creader-pageloading-wrap .loader-block{box-sizing:border-box;overflow:hidden;margin:8px 0;width:100%;height:22px;animation:EpubLineLoading 2s ease infinite;background:linear-gradient(90deg,#fbfbfb,#f5f5f5,#fbfbfb);background-size:200% 200%}.creader-pageloading-wrap .loader-block .title-block{margin:8px auto;width:207px}.creader-pageloading-wrap .ppt-container{background-color:#ededed;position:absolute;left:0;top:0;right:0;bottom:0}.creader-pageloading-wrap .ppt-container .logo{position:absolute;width:133px;height:44px;top:50%;left:50%;transform:translate(-50%,-50%)}.creader-root{position:relative;margin:0 auto;padding:0;text-align:left}.creader-decview{height:1px;margin:0 auto}.creader-root .pageNo{display:inline-block;position:relative;border-radius:8px;font-size:0;background-color:#fff;margin:0 auto;cursor:text}.creader-canvas{position:relative;top:0;left:0;right:0;bottom:0;box-sizing:border-box}.creader-error{display:flex;flex-direction:column;align-items:center;cursor:pointer;position:absolute;top:0;left:0;right:0;bottom:0}.creader-error__text{color:#999;font-size:18px}.creader-error__image{width:80px;height:80px;margin:160px auto 10px;background-repeat:no-repeat;background-image:url(https://edu-wenku.bdimg.com/v1/wkSmallApp/pc/network_error-1635842434571.png);background-position:0 0;background-size:100% 100%;opacity:.2}.creader-interative-canvas,.creader-interative-div,.creader-keyword-canvas{position:absolute;top:0;left:0;right:0;bottom:0}#creader-view{position:relative;display:inline-block;margin:20px auto;border-radius:8px}.canvas-container{position:absolute!important;top:0;right:0;bottom:0;left:0}.watermark-container{position:relative;padding-bottom:100px;top:10px}.watermark-text{text-align:right;font-size:16px;white-space:nowrap;overflow:hidden}.watermark-img{position:absolute;margin-top:4px;width:70px;right:0}',{}),e.CRCanvasSelectorId=m,e.CRDefaultConfig=C,e.CRPageSelectorId=w,e.CReader=ze,e.CReaderRootSelectorId=b,e.pareseReaderInfo=A,e.watermarkPlugin=_e}));
__sula_scope.define("sula-other-common",["exports","axios","@baidu/orion-request","sula-other-vendor","clipboard","@baidu/orion-login","@baidu/orion-util","@baidu/orion-log"],(function(t,e,o,a,i,n,r,s){"use strict";function c(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var d=c(e),p=c(i),l=c(n),u={notempty:/^.+$/,phone:/^1[3456789]\d{9}$/,mail:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/};var f=["none","doc","xls","ppt","doc","xls","ppt","pdf","txt","wps","et","dps","vsd","rtf","pot","pps","epub","html","pack","dwg","xmind"],h={doc:"doc",docx:"doc",wps:"wps",et:"wps",dps:"wps",ppt:"ppt",pptx:"ppt",pot:"ppt",pps:"ppt",xls:"xls",xlsx:"xls",rtf:"rtf",epub:"epub",pdf:"pdf",txt:"txt",vsd:"vsd",dwg:"dwg",xmind:"xmind",none:"none",html:"html",pack:"pack"};function v(t){for(var e=0,o=0;o<t.length;o+=1){var a=t.charCodeAt(o);e+=a<=128&&a>=0?1:2}return e}var m,g,x={props:{fullScore:{type:Number,default:5},score:{type:Number,default:5}}},w=function(t){t&&t("data-v-0f3c13aa_0",{source:".score-stars[data-v-0f3c13aa]{font-size:0;display:inline-block;margin-right:14px}.score-stars .stars-wrap[data-v-0f3c13aa]{position:relative;display:inline-block;vertical-align:top;line-height:1;height:20px}.score-stars .stars-wrap .star[data-v-0f3c13aa]{display:inline-block;margin-top:4px;width:12px;height:12px;vertical-align:top;background-position:50% 50%;background-size:12px 12px}.score-stars .stars-wrap .stars-gray[data-v-0f3c13aa]{display:inline-block;width:60px}.score-stars .stars-wrap .stars-gray>div[data-v-0f3c13aa]{background-image:url(https://edu-wenku.bdimg.com/v1/pc/common/icon-star-gray.svg)}.score-stars .stars-wrap .score-wrap[data-v-0f3c13aa]{position:absolute;top:0;left:0;height:20px;overflow:hidden}.score-stars .stars-wrap .stars-red[data-v-0f3c13aa]{width:60px}.score-stars .stars-wrap .stars-red>div[data-v-0f3c13aa]{background-image:url(https://edu-wenku.bdimg.com/v1/pc/common/icon-star.svg)}.score-stars .score-val[data-v-0f3c13aa]{display:inline-block;vertical-align:top;height:20px;line-height:20px;font-size:12px;color:#fd403e;margin-left:6px}",map:void 0,media:void 0})},b=a.normalizeComponent({render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"score-stars"},[o("div",{staticClass:"stars-wrap"},[o("div",{staticClass:"stars-gray"},t._l(new Array(t.fullScore),(function(t,e){return o("div",{key:e,staticClass:"star"})})),0),t._v(" "),o("div",{staticClass:"score-wrap",style:{width:t.score/t.fullScore*100+"%"}},[o("div",{staticClass:"stars-red"},t._l(new Array(t.fullScore),(function(t,e){return o("div",{key:e,staticClass:"star"})})),0)])]),t._v(" "),o("span",{staticClass:"score-val"},[t._v(t._s(t.score))])])},staticRenderFns:[]},w,x,"data-v-0f3c13aa",false,undefined,!1,a.createInjector,void 0,void 0);function y(){for(var t,e=r.$(".normal-result-list")[0],o=e.offsetLeft,a=e.offsetTop;e=e.offsetParent;)o+=e.offsetLeft,a+=e.offsetTop;return o-=(t=document,window.pageXOffset||t.documentElement.scrollLeft||t.body.scrollLeft),a-=function(){var t=document;return window.pageYOffset||t.documentElement.scrollTop||t.body.scrollTop}(),{x:o,y:a}}t.SellType=void 0,(m=t.SellType||(t.SellType={}))[m.VIPFREE=1]="VIPFREE",m[m.VIPPRO=2]="VIPPRO",m[m.PAY=3]="PAY",m[m.TICK=4]="TICK",m[m.FREE=5]="FREE",t.UserType=void 0,(g=t.UserType||(t.UserType={}))[g.UGC=1]="UGC",g[g.PGC=2]="PGC",g[g.BGC=3]="BGC";var k={x:0,y:0},_=!1;function C(t){return function(){var t,e,o;if(null!==(t=document)&&void 0!==t&&null!==(e=t.selection)&&void 0!==e&&e.createRange)o=document.selection.createRange();else{var a=window.getSelection();o=a&&a.rangeCount?a.getRangeAt(0):""}return o}().toString()}!_&&r.$(document).on("mousemove",(function(t){k.x=t.clientX,k.y=t.clientY,_=!0}));var T={data:function(){return{rootSelector:".search-result-list-wrap",lastStatus:{},copyTipVisible:!1,vipGuideShow:!1,copyBtnId:"copy-btn",clipboard:"",selectTxt:""}},computed:{style:function(){var t=this.lastStatus,e=t.x;return{top:t.y-55+"px",left:e-70+"px"}}},mounted:function(){var t=this;this.$nextTick((function(){t.clipboard=new p.default(".".concat(t.copyBtnId))}))},methods:{clearPops:function(){this.copyTipVisible=!1},onContextmenu:function(t){var e=this;if(this.clearPops(),C($(this.rootSelector)[0]))var o=setTimeout((function(){e.showButtons(),clearTimeout(o)}),300);return!1},onMouseup:function(t){var e=this;if($(document).on("keydown",(function(t){var o,a;[67].includes(t.keyCode)&&(e.clearPops(),null!==(o=document)&&void 0!==o&&null!==(a=o.selection)&&void 0!==a&&a.empty?document.selection.empty():window.getSelection().removeAllRanges())})),this.clearPops(),void 0!==t.button&&2!==t.button){var o=C($(this.rootSelector)[0]);o&&(this.selectTxt=o,this.clearPops(),this.showButtons())}},documentMousedown:function(t){try{var e;if((null==t||null===(e=t.target)||void 0===e?void 0:e._prevClass.indexOf("pc-search-copy-tag"))>0)return;this.clearPops()}catch(t){this.clearPops()}},showButtons:function(){var t,e=(t=y(),{x:k.x-t.x,y:k.y-t.y}),o={x:e.x,y:e.y};this.lastStatus=o,this.copyable&&(s.log.xsend(103301,{behavior:"show"}),this.copyTipVisible=!0)},listenCopy:function(){$(this.rootSelector).on("dragstart",(function(t){return!1}));var t=$(this.$refs.pcSearchItem),e=$("#app");t.on("mouseup",$.proxy(this.onMouseup,this)),t.on("contextmenu",$.proxy(this.onContextmenu,this)),e.on("mousedown",$.proxy(this.documentMousedown,this))},checkUserAuth:function(){var t=this.isLogin,e=this.isVip;t?e?(this.clipboard=new p.default(".".concat(this.copyBtnId)),$(".".concat(this.copyBtnId)).attr("data-clipboard-text",this.selectTxt)):this.vipGuideShow=!0:(new l.default).log()},clickCopy:function(){s.log.xsend(103301,{behavior:"click",function:"copy"});var t=this.isLogin,e=this.isVip;t?e?(this.clipboard=new p.default(".".concat(this.copyBtnId)),$(".".concat(this.copyBtnId)).attr("data-clipboard-text",this.selectTxt)):this.vipGuideShow=!0:(new l.default).log();this.clearPops()},clickSearch:function(){s.log.xsend(103301,{behavior:"click",function:"search"}),window.location.href="https://wenku.baidu.com/search?word=".concat(this.selectTxt,"&ie=utf-8"),this.clearPops()}}},S=function(t){t&&t("data-v-7ca10c23_0",{source:".copy-btns[data-v-7ca10c23]{position:absolute;width:140px;line-height:45px;cursor:pointer;z-index:1000;border-radius:4px;padding:1px;box-sizing:border-box;background-image:url(https://edu-wenku.bdimg.com/v1/pc/view/ReaderPlugin/tips-wrap-bg.png);background-size:140px 45px;background-repeat:no-repeat;background-position:0;color:#fff;font-size:14px;text-align:center;display:flex}.copy-btns .divider[data-v-7ca10c23]{display:inline-block;width:1px;height:14px;line-height:14px;padding:0;box-sizing:border-box;background-color:#666;margin:11px 0}.copy-btns .btn[data-v-7ca10c23]{display:inline-block;flex:1;position:relative;top:-3px}",map:void 0,media:void 0})},I=a.normalizeComponent({render:function(){var t=this.$createElement;return(this._self._c||t)("div")},staticRenderFns:[]},S,T,"data-v-7ca10c23",false,undefined,!1,a.createInjector,void 0,void 0),z={props:{vipGuideShow:{type:Boolean,default:!1}},methods:{openVip:function(){window.location.href="https://wenku.baidu.com/ndbusiness/browse/wenkuvipcashier?cashier_code=PCSearchCopyGuide"},cancel:function(){this.$emit("closeDialog")}}},P=function(t){t&&t("data-v-31aa3834_0",{source:".copy-guide-vip-wrap .mask[data-v-31aa3834]{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.5);z-index:5000}.copy-guide-vip-wrap .mask .dialog[data-v-31aa3834]{position:fixed;top:50%;left:50%;width:472px;height:206px;text-align:center;border-radius:8px;transform:translate(-50%,-50%);z-index:6000;user-select:none;animation:fadeIn ease .3s;border-radius:12px;background-repeat:no-repeat;background-size:100%;background-image:url(https://edu-wenku.bdimg.com/v1/pc/copy-guide-vip-1648390510939.png);margin:0 auto}.copy-guide-vip-wrap .mask .dialog .btn-close[data-v-31aa3834]{position:absolute;top:15px;right:15px;width:12px;height:12px;background:url(https://edu-wenku.bdimg.com/v1/pc/goto-cashier-close.png);background-size:100% 100%;cursor:pointer;transition:transform .5s cubic-bezier(.175,.885,.32,1.275)}.copy-guide-vip-wrap .mask .dialog .btn-close[data-v-31aa3834]:hover{transform:rotate(-90deg)}.copy-guide-vip-wrap .mask .dialog .open-btn[data-v-31aa3834]{width:100px;line-height:30px;font-size:16px;color:#7f5011;text-align:center;margin:0 auto;margin-top:127px;cursor:pointer}",map:void 0,media:void 0})},E=a.normalizeComponent({render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"show",rawName:"v-show",value:t.vipGuideShow,expression:"vipGuideShow"}],staticClass:"copy-guide-vip-wrap"},[o("div",{staticClass:"mask"},[o("div",{staticClass:"dialog"},[o("div",{staticClass:"btn-close",on:{click:t.cancel}}),t._v(" "),o("div",{staticClass:"open-btn",on:{click:t.openVip}},[t._v("立即开通")])])])])},staticRenderFns:[]},P,z,"data-v-31aa3834",false,undefined,!1,a.createInjector,void 0,void 0),R={data:function(){return{text:"",show:!1,timer:null}},methods:{showToast:function(t){var e=this;this.clearTimer(),this.text=t,this.show=!0,this.timer=setTimeout((function(){e.clearTimer()}),3e3)},clearTimer:function(){this.timer=clearTimeout(this.timer),this.text="",this.show=!1}}},A=function(t){t&&t("data-v-d91e77f6_0",{source:".toast[data-v-d91e77f6]{position:fixed;top:50%;left:50%;padding:0 16px;transform:translate(-50%,-50%);height:40px;line-height:40px;background:rgba(0,0,0,.6);font-size:18px;color:#fff;border-radius:6px;animation:easeIn-data-v-d91e77f6 .3s ease forwards;z-index:2002}@-moz-keyframes easeIn-data-v-d91e77f6{from{opacity:0}to{opacity:1}}@-webkit-keyframes easeIn-data-v-d91e77f6{from{opacity:0}to{opacity:1}}@-o-keyframes easeIn-data-v-d91e77f6{from{opacity:0}to{opacity:1}}@keyframes easeIn-data-v-d91e77f6{from{opacity:0}to{opacity:1}}",map:void 0,media:void 0})},G=a.normalizeComponent({render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"toast"},[t._v("\n    "+t._s(t.text)+"\n")])},staticRenderFns:[]},A,R,"data-v-d91e77f6",false,undefined,!1,a.createInjector,void 0,void 0);t.__vue_component__=b,t.__vue_component__$1=I,t.__vue_component__$2=E,t.__vue_component__$3=G,t.checkData=function(t){if(Array.isArray(t)&&0!==t.length){var e=[];return t.forEach((function(t){e.push(function(t){if(!t.rule||void 0===t.value||null===t.value)return!1;var e=t.rule.split("_");if(t.rule.indexOf("len")>-1&&3===e.length)return t.value.length>e[1]&&t.value.length<e[2];if(!u[t.rule])throw Error("规则非法!");return u[t.rule].test(t.value)}(t))})),e}},t.checkPhone=function(t){return/^1[3456789]\d{9}$/.test(t)},t.cutContent=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,o=0,a=/<em>(.*?)<\/em>/gi,i=new Set;return t.replace(a,(function(t,e){return i.add(e),t})).split(a).map((function(t){var a=function(e){return i.has(t)?"<em>".concat(e,"</em>"):e},n=e-o;if(n<=0)return"";var r=v(t);if(r<n)return o+=r,a(t);var s="",c=0;do{s+=t[c++]}while(v(s)<n);return o+=v(s)+1,(s=s.replace(/\.\.\.$/,""))?a(s+"..."):"..."})).join("")},t.docExtHash=f,t.docIconHash=h,t.formatNum=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=e.minNum,a=void 0===o?1e4:o;return t<a?t:t>=1e8?"".concat(Math.floor(t/1e8*10)/10,"亿"):t>=1e4?"".concat(Math.floor(t/1e4*10)/10,"万"):t>=1e3?"".concat(Math.floor(t/1e3*10)/10,"千"):t},t.getDataTime=function(t){var e=new Date(1e3*(t||0));return"".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate())},t.getDocIcon=function(t){return h[f[+t]]||"none"},t.getUrl=function(t,e,o){d.default.get(t,{params:e}).then((function(t){t&&t.data&&t.data.status&&0!==t.data.status.code?alert(t.data.data.errstr):o(t.data)})).catch((function(t){alert("请求接口异常,请稍后再试~")}))},t.numberToShort=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=e.units,a=void 0===o?["w"]:o,i=e.step,n=void 0===i?1e4:i,r=e.needRound,s=void 0===r||r;if(!+t)return t;for(var c=t,d="";a.length>0&&c>=n;)d=a.shift(),c/=n;return[(s?Math.round(10*c):Math.floor(10*c))/10,d].join("")},t.request=function(t){return o.wkAxios(t)},t.splitNum=function(t){var e=""+t,o="",a="";return t>1e3&&(o=e.slice(-3),a=e.slice(0,-3),e=a+","+o),t>1e6&&(o=e.slice(-7),a=e.slice(0,-7),e=a+","+o),e}}));
__sula_scope.define("sula-other-vendor",["exports"],(function(e){"use strict";var t,n="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());var o={};var i,r,a=(i=function(e){!function(){function t(e,t){document.addEventListener?e.addEventListener("scroll",t,!1):e.attachEvent("scroll",t)}function n(e){this.g=document.createElement("div"),this.g.setAttribute("aria-hidden","true"),this.g.appendChild(document.createTextNode(e)),this.h=document.createElement("span"),this.i=document.createElement("span"),this.m=document.createElement("span"),this.j=document.createElement("span"),this.l=-1,this.h.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.i.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.j.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.m.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.h.appendChild(this.m),this.i.appendChild(this.j),this.g.appendChild(this.h),this.g.appendChild(this.i)}function o(e,t){e.g.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+t+";"}function i(e){var t=e.g.offsetWidth,n=t+100;return e.j.style.width=n+"px",e.i.scrollLeft=n,e.h.scrollLeft=e.h.scrollWidth+100,e.l!==t&&(e.l=t,!0)}function r(e,n){function o(){var e=r;i(e)&&null!==e.g.parentNode&&n(e.l)}var r=e;t(e.h,o),t(e.i,o),i(e)}function a(e,t,n){t=t||{},n=n||window,this.family=e,this.style=t.style||"normal",this.weight=t.weight||"normal",this.stretch=t.stretch||"normal",this.context=n}var s=null,d=null,c=null,l=null;function u(e){return null===l&&(l=!!e.document.fonts),l}function f(e,t){var n=e.style,o=e.weight;if(null===c){var i=document.createElement("div");try{i.style.font="condensed 100px sans-serif"}catch(e){}c=""!==i.style.font}return[n,o,c?e.stretch:"","100px",t].join(" ")}a.prototype.load=function(e,t){var i=this,a=e||"BESbswy",c=0,l=t||3e3,p=(new Date).getTime();return new Promise((function(e,t){if(u(i.context)&&!function(e){return null===d&&(u(e)&&/Apple/.test(window.navigator.vendor)?(e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent),d=!!e&&603>parseInt(e[1],10)):d=!1),d}(i.context)){var h=new Promise((function(e,t){!function n(){(new Date).getTime()-p>=l?t(Error(l+"ms timeout exceeded")):i.context.document.fonts.load(f(i,'"'+i.family+'"'),a).then((function(t){1<=t.length?e():setTimeout(n,25)}),t)}()})),m=new Promise((function(e,t){c=setTimeout((function(){t(Error(l+"ms timeout exceeded"))}),l)}));Promise.race([m,h]).then((function(){clearTimeout(c),e(i)}),t)}else!function(e){document.body?e():document.addEventListener?document.addEventListener("DOMContentLoaded",(function t(){document.removeEventListener("DOMContentLoaded",t),e()})):document.attachEvent("onreadystatechange",(function t(){"interactive"!=document.readyState&&"complete"!=document.readyState||(document.detachEvent("onreadystatechange",t),e())}))}((function(){function d(){var t;(t=-1!=v&&-1!=g||-1!=v&&-1!=y||-1!=g&&-1!=y)&&((t=v!=g&&v!=y&&g!=y)||(null===s&&(t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),s=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))),t=s&&(v==w&&g==w&&y==w||v==x&&g==x&&y==x||v==b&&g==b&&y==b)),t=!t),t&&(null!==C.parentNode&&C.parentNode.removeChild(C),clearTimeout(c),e(i))}var u=new n(a),h=new n(a),m=new n(a),v=-1,g=-1,y=-1,w=-1,x=-1,b=-1,C=document.createElement("div");C.dir="ltr",o(u,f(i,"sans-serif")),o(h,f(i,"serif")),o(m,f(i,"monospace")),C.appendChild(u.g),C.appendChild(h.g),C.appendChild(m.g),i.context.document.body.appendChild(C),w=u.g.offsetWidth,x=h.g.offsetWidth,b=m.g.offsetWidth,function e(){if((new Date).getTime()-p>=l)null!==C.parentNode&&C.parentNode.removeChild(C),t(Error(l+"ms timeout exceeded"));else{var n=i.context.document.hidden;!0!==n&&void 0!==n||(v=u.g.offsetWidth,g=h.g.offsetWidth,y=m.g.offsetWidth,d()),c=setTimeout(e,50)}}(),r(u,(function(e){v=e,d()})),o(u,f(i,'"'+i.family+'",sans-serif')),r(h,(function(e){g=e,d()})),o(h,f(i,'"'+i.family+'",serif')),r(m,(function(e){y=e,d()})),o(m,f(i,'"'+i.family+'",monospace'))}))}))},e.exports=a}()},i(r={exports:{}},r.exports),r.exports);var s=[],d=[];var c=1;function l(e){var t=[];for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}e.createInjector=function(e){return function(e,i){return function(e,i){var r=n?i.media||"default":e,a=o[r]||(o[r]={ids:new Set,styles:[]});if(!a.ids.has(e)){a.ids.add(e);var s=i.source;if(i.map&&(s+="\n/*# sourceURL="+i.map.sources[0]+" */",s+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i.map))))+" */"),a.element||(a.element=document.createElement("style"),a.element.type="text/css",i.media&&a.element.setAttribute("media",i.media),void 0===t&&(t=document.head||document.getElementsByTagName("head")[0]),t.appendChild(a.element)),"styleSheet"in a.element)a.styles.push(s),a.element.styleSheet.cssText=a.styles.filter(Boolean).join("\n");else{var d=a.ids.size-1,c=document.createTextNode(s),l=a.element.childNodes;l[d]&&a.element.removeChild(l[d]),l.length?a.element.insertBefore(c,l[d]):a.element.appendChild(c)}}}(e,i)}},e.fontfaceobserver_standalone=a,e.lib=function(e){return new Promise((function(t,n){var o=document.createElement("script"),i=e.url;if(e.params){var r=l(e.params);r&&(i+=(i.indexOf("?")>=0?"&":"?")+r)}function a(){o&&(o.onload=o.onreadystatechange=o.onerror=null,o.parentNode&&o.parentNode.removeChild(o),o=null)}o.async=!0;var s="axiosJsonpCallback"+c++,d=window[s],u=!1;window[s]=function(e){(window[s]=d,u)||t({data:e,status:200})};var f={_:(new Date).getTime()};f[e.callbackParamName||"callback"]=s,i+=(i.indexOf("?")>=0?"&":"?")+l(f),o.onload=o.onreadystatechange=function(){o.readyState&&!/loaded|complete/.test(o.readyState)||a()},o.onerror=function(){a(),n(new Error("Network Error"))},e.cancelToken&&e.cancelToken.promise.then((function(e){o&&(u=!0,n(e))})),o.src=i,document.head.appendChild(o)}))},e.mitt=function(e){return{all:e=e||new Map,on:function(t,n){var o=e.get(t);o?o.push(n):e.set(t,[n])},off:function(t,n){var o=e.get(t);o&&(n?o.splice(o.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var o=e.get(t);o&&o.slice().map((function(e){e(n)})),(o=e.get("*"))&&o.slice().map((function(e){e(t,n)}))}}},e.n=function(e,t){if(e&&"undefined"!=typeof document){var n,o=!0===t.prepend?"prepend":"append",i=!0===t.singleTag,r="string"==typeof t.container?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(i){var a=s.indexOf(r);-1===a&&(a=s.push(r)-1,d[a]={}),n=d[a]&&d[a][o]?d[a][o]:d[a][o]=c()}else n=c();65279===e.charCodeAt(0)&&(e=e.substring(1)),n.styleSheet?n.styleSheet.cssText+=e:n.appendChild(document.createTextNode(e))}function c(){var e=document.createElement("style");if(e.setAttribute("type","text/css"),t.attributes)for(var n=Object.keys(t.attributes),i=0;i<n.length;i++)e.setAttribute(n[i],t.attributes[n[i]]);var a="prepend"===o?"afterbegin":"beforeend";return r.insertAdjacentElement(a,e),e}},e.normalizeComponent=function(e,t,n,o,i,r,a,s,d,c){"boolean"!=typeof a&&(d=s,s=a,a=!1);var l,u="function"==typeof n?n.options:n;if(e&&e.render&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0,i&&(u.functional=!0)),o&&(u._scopeId=o),r?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,d(e)),e&&e._registeredComponents&&e._registeredComponents.add(r)},u._ssrRegister=l):t&&(l=a?function(e){t.call(this,c(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,s(e))}),l)if(u.functional){var f=u.render;u.render=function(e,t){return l.call(t),f(e,t)}}else{var p=u.beforeCreate;u.beforeCreate=p?[].concat(p,l):[l]}return n},e.throttle=function(e,t,n,o){var i,r=!1,a=0;function s(){i&&clearTimeout(i)}function d(){for(var d=arguments.length,c=new Array(d),l=0;l<d;l++)c[l]=arguments[l];var u=this,f=Date.now()-a;function p(){a=Date.now(),n.apply(u,c)}function h(){i=void 0}r||(o&&!i&&p(),s(),void 0===o&&f>e?p():!0!==t&&(i=setTimeout(o?h:p,void 0===o?e-f:e)))}return"boolean"!=typeof t&&(o=n,n=t,t=void 0),d.cancel=function(){s(),r=!0},d}}));
__sula_scope.define("sula-pcsearch-common",["exports","sula-babel-vendor","sula-other-common","sula-other-vendor","vuex","@baidu/orion-login"],(function(e,t,n,o,i,a){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var c,l=r(a);e.CoverShowType=void 0,(c=e.CoverShowType||(e.CoverShowType={}))[c.NoCover=0]="NoCover",c[c.Cover=1]="Cover",c[c.MultiCovers=2]="MultiCovers";var p={props:{docType:{default:0,type:Number},icon:{default:"",type:String}},computed:{docIcon:function(){return n.getDocIcon(this.docType)}}},d=function(e){e&&(e("data-v-8587bc7e_0",{source:".pc-search-icon_bee78{display:inline-block;vertical-align:middle;width:18px;height:18px;background-size:contain;background-repeat:no-repeat}.pc-search-icon_none_bee78{background-image:url(//edu-wenku.bdimg.com/v1/pc/2022-doc-icon/none.svg)}.pc-search-icon_doc_bee78{background-image:url(//edu-wenku.bdimg.com/v1/pc/2022-doc-icon/doc.svg)}.pc-search-icon_xls_bee78{background-image:url(//edu-wenku.bdimg.com/v1/pc/2022-doc-icon/xls.svg)}.pc-search-icon_ppt_bee78{background-image:url(//edu-wenku.bdimg.com/v1/pc/2022-doc-icon/ppt.svg)}.pc-search-icon_pdf_bee78{background-image:url(//edu-wenku.bdimg.com/v1/pc/2022-doc-icon/pdf.svg)}.pc-search-icon_txt_bee78{background-image:url(//edu-wenku.bdimg.com/v1/pc/2022-doc-icon/txt.svg)}.pc-search-icon_wps_bee78{background-image:url(//edu-wenku.bdimg.com/v1/pc/2022-doc-icon/wps.svg)}.pc-search-icon_vsd_bee78{background-image:url(//edu-wenku.bdimg.com/v1/pc/2022-doc-icon/vsd.svg)}.pc-search-icon_rtf_bee78{background-image:url(//edu-wenku.bdimg.com/v1/pc/2022-doc-icon/rtf.svg)}.pc-search-icon_epub_bee78{background-image:url(//edu-wenku.bdimg.com/v1/pc/2022-doc-icon/epub.svg)}.pc-search-icon_html_bee78{background-image:url(//edu-wenku.bdimg.com/v1/pc/2022-doc-icon/html.svg)}.pc-search-icon_pack_bee78{background-image:url(//edu-wenku.bdimg.com/v1/pc/2022-doc-icon/pack.svg)}.pc-search-icon_dwg_bee78{background-image:url(//edu-wenku.bdimg.com/v1/pc/2022-doc-icon/dwg.svg)}.pc-search-icon_xmind_bee78{background-image:url(//edu-wenku.bdimg.com/v1/pc/2022-doc-icon/xmind.svg)}",map:void 0,media:void 0}),Object.defineProperty(this,"$style",{value:{pcSearchIcon:"pc-search-icon_bee78",pcSearchIcon_none:"pc-search-icon_none_bee78",pcSearchIcon_doc:"pc-search-icon_doc_bee78",pcSearchIcon_xls:"pc-search-icon_xls_bee78",pcSearchIcon_ppt:"pc-search-icon_ppt_bee78",pcSearchIcon_pdf:"pc-search-icon_pdf_bee78",pcSearchIcon_txt:"pc-search-icon_txt_bee78",pcSearchIcon_wps:"pc-search-icon_wps_bee78",pcSearchIcon_vsd:"pc-search-icon_vsd_bee78",pcSearchIcon_rtf:"pc-search-icon_rtf_bee78",pcSearchIcon_epub:"pc-search-icon_epub_bee78",pcSearchIcon_html:"pc-search-icon_html_bee78",pcSearchIcon_pack:"pc-search-icon_pack_bee78",pcSearchIcon_dwg:"pc-search-icon_dwg_bee78",pcSearchIcon_xmind:"pc-search-icon_xmind_bee78"}}))},s=o.normalizeComponent({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.icon?n("div",{class:e.$style.pcSearchIcon,style:"background-image: url("+e.icon+")"}):e.docIcon?n("div",{class:[e.$style.pcSearchIcon,e.$style["pcSearchIcon_"+e.docIcon]]}):e._e()},staticRenderFns:[]},d,p,undefined,false,undefined,!1,o.createInjector,void 0,void 0),g={props:{title:{default:"",type:String},docType:{default:0,type:Number},tag:{type:String,default:""},href:{type:String,default:""},showIcon:{type:Boolean,default:!0},icon:{type:String,default:""},titleFontSize:{type:Number,default:18},maxWord:{type:Number,default:0}},methods:{handleLinkClick:function(e){e.logExtInfo={sulaActionPosition:"cardTitle"}}},components:{SearchIcon:s},computed:{cuttedTitle:function(){return this.maxWord?n.cutContent(this.title,this.maxWord):this.title}}},f=function(e){e&&(e("data-v-2cca5c5f_0",{source:".pc-search-title-wrap_f5ef6{height:22px;font-size:0;white-space:nowrap;overflow:hidden;font-family:PingFangSC-Regular,sans-serif}.pc-search-title-wrap_f5ef6::before{content:'';display:inline-block;vertical-align:middle;height:100%;width:0}.pc-search-title-wrap_f5ef6 a{margin-left:5px;max-width:370px;overflow:hidden;display:inline-block;white-space:nowrap;text-overflow:ellipsis;line-height:1.2;vertical-align:middle;color:#242cca;cursor:pointer;border:0;outline:0}.pc-search-title-wrap_f5ef6 a:hover{color:#4d54e6}.pc-search-title-wrap_f5ef6 a:active{color:#f73131}.pc-search-title-wrap_f5ef6 .title-tag_f5ef6{display:inline-block;vertical-align:middle;border:1px solid #4e6ef2;border-radius:4px;font-size:12px;color:#2440b3;padding:0 6px;height:20px;line-height:20px;box-sizing:border-box;margin-left:6px}",map:void 0,media:void 0}),Object.defineProperty(this,"$style",{value:{pcSearchTitleWrap:"pc-search-title-wrap_f5ef6",titleTag:"title-tag_f5ef6"}}))},_=o.normalizeComponent({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.$style.pcSearchTitleWrap},[e.showIcon?n("search-icon",{attrs:{icon:e.icon,"doc-type":e.docType}}):e._e(),e._v(" "),n("a",{style:{"font-size":e.titleFontSize+"px"},attrs:{href:e.href,target:"_blank"},domProps:{innerHTML:e._s(e.cuttedTitle)},on:{click:e.handleLinkClick}}),e._v(" "),e.tag?n("div",{class:e.$style.titleTag},[e._v(e._s(e.tag))]):e._t("tag")],2)},staticRenderFns:[]},f,g,undefined,false,undefined,!1,o.createInjector,void 0,void 0);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function u(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?b(Object(o),!0).forEach((function(n){t._defineProperty(e,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):b(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var m,h={components:{SearchTitle:_,ScoreStars:n.__vue_component__},data:function(){return{CoverShowType:e.CoverShowType}},props:{index:{default:0,type:Number},content:{default:function(){return{}},type:Object},isHeadLead:{default:!1,type:Boolean}},computed:u(u({},i.mapGetters(["isLogin"])),{},{downloadCount:function(){var e;return n.numberToShort(null===(e=this.content)||void 0===e?void 0:e.downloadCount,{needRound:!1})},coverShowType:function(){return+this.content.coverShowType},isMultiCover:function(){return this.coverShowType===e.CoverShowType.MultiCovers},isSingleCover:function(){return this.coverShowType===e.CoverShowType.Cover},isNoCover:function(){return this.coverShowType===e.CoverShowType.NoCover},covers:function(){var e;return(null===(e=this.content)||void 0===e?void 0:e.covers)||[]},cover:function(){var e;return(null===(e=this.covers)||void 0===e?void 0:e[0])||""},score:function(){var e,t=(null===(e=this.content)||void 0===e?void 0:e.qualityScore)||0;return Math.round(10*t)/10},downloadBtnShow:function(){var e;return(null===(e=this.content)||void 0===e?void 0:e.isShowDownloadBtn)||!1}}),methods:{downloadFile:function(e){this.isLogin?window.open(e,"__blank"):(new l.default).log((function(){}),!0,{url:e})}}},v=function(e){e&&(e("data-v-32f562ce_0",{source:".aggregation-content_bf030{background:#fff;font-family:PingFangSC-Regular,sans-serif;line-height:1;font-size:0;position:relative}.aggregation-content_bf030 .agg-item_bf030{position:relative;margin-bottom:16px}.aggregation-content_bf030 .agg-item_bf030:last-child{margin-bottom:0}.aggregation-content_bf030 .head-lead-content_bf030{white-space:nowrap;margin-top:10px}.aggregation-content_bf030 .head-lead-content_bf030.is-show-cover_bf030{height:106px}.aggregation-content_bf030 .head-lead-content_bf030.is-show-cover_bf030 .head-content-img_bf030{display:inline-block;vertical-align:top;height:106px;width:80px;border-radius:6px;border:1px solid rgba(0,0,0,.1);background-size:cover;background-position:center}.aggregation-content_bf030 .head-lead-content_bf030.is-show-cover_bf030 .head-content-info_bf030{margin-left:9px;width:470px;height:106px}.aggregation-content_bf030 .head-lead-content_bf030 a{text-decoration:none;color:#333}.aggregation-content_bf030 .head-lead-content_bf030 a:active,.aggregation-content_bf030 .head-lead-content_bf030 a:hover,.aggregation-content_bf030 .head-lead-content_bf030 a:link,.aggregation-content_bf030 .head-lead-content_bf030 a:visited{text-decoration:none;color:#333;outline:0}.aggregation-content_bf030 .head-content-info_bf030{position:relative;vertical-align:top;display:inline-block;white-space:normal;box-sizing:border-box;width:100%;padding-bottom:23px}.aggregation-content_bf030 .head-content-info_bf030 .head-content-text_bf030{max-height:84px;overflow-wrap:break-word;white-space:normal;display:-webkit-box;-webkit-box-orient:vertical;overflow:hidden;-webkit-line-clamp:3;line-height:18px;font-size:12px;color:#555;text-decoration:none}.aggregation-content_bf030 .ext-info_bf030{display:flex;flex-flow:row nowrap;justify-content:start;align-items:center;position:absolute;bottom:21px}.aggregation-content_bf030 .ext-info_bf030 .info_bf030{font-size:13px;color:#9195a3}.aggregation-content_bf030 .ext-info_bf030 .info_bf030>i{margin:0 2px;width:12px}.aggregation-content_bf030 .ext-info_bf030 .ext-download_bf030{position:absolute;width:78px;line-height:28px;border:1px solid #22ab82;font-size:13px;color:#22ab82;font-weight:700;border-radius:4px;text-align:center;cursor:pointer;margin-left:389px}.aggregation-content_bf030 .ext-info_bf030 .ext-download_bf030:hover{background-color:#22ab82;color:#fff}.aggregation-content_bf030 .ppt-ext-info_bf030{display:flex;flex-flow:row nowrap;justify-content:start;align-items:center}.aggregation-content_bf030 .ppt-ext-info_bf030 .ppt-info_bf030{font-size:13px;color:#888;line-height:13px}.aggregation-content_bf030 .ppt-ext-info_bf030 .ppt-download_bf030{position:absolute;width:78px;right:0;line-height:28px;border:1px solid #22ab82;font-size:13px;color:#22ab82;font-weight:700;border-radius:4px;text-align:center;cursor:pointer;margin-left:407px}.aggregation-content_bf030 .ppt-ext-info_bf030 .ppt-download_bf030:hover{background-color:#22ab82;color:#fff}.aggregation-content_bf030 .normal-item-content_bf030{text-decoration:none;color:#333;display:block;margin-top:6px}.aggregation-content_bf030 .normal-item-content_bf030:active,.aggregation-content_bf030 .normal-item-content_bf030:hover,.aggregation-content_bf030 .normal-item-content_bf030:link,.aggregation-content_bf030 .normal-item-content_bf030:visited{text-decoration:none;color:#333;outline:0}.aggregation-content_bf030 .normal-item-content_bf030 .normal-content-text_bf030{width:460px;overflow:hidden;height:15px;line-height:15px;text-overflow:ellipsis;font-size:13px;color:#333;white-space:nowrap}.aggregation-content_bf030 .normal-info-wrap_bf030{display:flex;flex-flow:row nowrap;justify-content:start;align-items:center;margin-top:6px}.aggregation-content_bf030 .normal-info-wrap_bf030 .normal-info_bf030{font-size:13px;color:#888;line-height:13px}.aggregation-content_bf030 .normal-info-wrap_bf030 .normal-download_bf030{position:absolute;width:78px;right:0;line-height:28px;border:1px solid #22ab82;font-size:13px;color:#22ab82;font-weight:700;border-radius:4px;text-align:center;cursor:pointer;margin-left:407px;top:20px}.aggregation-content_bf030 .normal-info-wrap_bf030 .normal-download_bf030:hover{background-color:#22ab82;color:#fff}.aggregation-content_bf030 .ppt-agg-content_bf030{white-space:nowrap;margin:10px 0 12px}.aggregation-content_bf030 .ppt-agg-content_bf030 .ppt-agg-item_bf030{display:inline-block;margin-left:17px}.aggregation-content_bf030 .ppt-agg-content_bf030 .ppt-agg-item_bf030:first-child{margin-left:0}.aggregation-content_bf030 .ppt-agg-content_bf030 .ppt-agg-item_bf030 .ppt-agg-item-img_bf030{text-decoration:none;color:#333;display:block;width:128px;height:85px;box-shadow:0 2px 8px 0 rgba(0,0,0,.05);background-size:cover;background-position:center}.aggregation-content_bf030 .ppt-agg-content_bf030 .ppt-agg-item_bf030 .ppt-agg-item-img_bf030:active,.aggregation-content_bf030 .ppt-agg-content_bf030 .ppt-agg-item_bf030 .ppt-agg-item-img_bf030:hover,.aggregation-content_bf030 .ppt-agg-content_bf030 .ppt-agg-item_bf030 .ppt-agg-item-img_bf030:link,.aggregation-content_bf030 .ppt-agg-content_bf030 .ppt-agg-item_bf030 .ppt-agg-item-img_bf030:visited{text-decoration:none;color:#333;outline:0}.aggregation-content_bf030 .ppt-agg-content_bf030{white-space:nowrap;margin:10px 0 12px}.aggregation-content_bf030 .ppt-agg-content_bf030 .ppt-agg-item_bf030{display:inline-block;margin-left:16px}.aggregation-content_bf030 .ppt-agg-content_bf030 .ppt-agg-item_bf030:first-child{margin-left:0}.aggregation-content_bf030 .ppt-agg-content_bf030 .ppt-agg-item_bf030 .ppt-agg-item-img_bf030{text-decoration:none;color:#333;display:block;width:126px;height:72px;border-radius:6px;border:1px solid #e5e5e5;background-size:cover;background-position:center}.aggregation-content_bf030 .ppt-agg-content_bf030 .ppt-agg-item_bf030 .ppt-agg-item-img_bf030:active,.aggregation-content_bf030 .ppt-agg-content_bf030 .ppt-agg-item_bf030 .ppt-agg-item-img_bf030:hover,.aggregation-content_bf030 .ppt-agg-content_bf030 .ppt-agg-item_bf030 .ppt-agg-item-img_bf030:link,.aggregation-content_bf030 .ppt-agg-content_bf030 .ppt-agg-item_bf030 .ppt-agg-item-img_bf030:visited{text-decoration:none;color:#333;outline:0}.aggregation-content_bf030 .star-point-icon_bf030{height:15px;width:15px;display:inline-block;background-size:100%;margin-top:-3px;vertical-align:middle}.aggregation-content_bf030 .star-point-icon_bf030.full_bf030{background-image:url(//edu-wenku.bdimg.com/v1/pc/activity-assets/star-full-1647227950157.png)}.aggregation-content_bf030 .star-point-icon_bf030.little_bf030{background-image:url(//edu-wenku.bdimg.com/v1/pc/activity-assets/star-little-1647227950565.png)}.aggregation-content_bf030 .star-point-icon_bf030.more_bf030{background-image:url(//edu-wenku.bdimg.com/v1/pc/activity-assets/star-more-1647227950949.png)}",map:void 0,media:void 0}),Object.defineProperty(this,"$style",{value:{aggregationContent:"aggregation-content_bf030",aggItem:"agg-item_bf030",headLeadContent:"head-lead-content_bf030",isShowCover:"is-show-cover_bf030",headContentImg:"head-content-img_bf030",headContentInfo:"head-content-info_bf030",headContentText:"head-content-text_bf030",extInfo:"ext-info_bf030",info:"info_bf030",extDownload:"ext-download_bf030",pptExtInfo:"ppt-ext-info_bf030",pptInfo:"ppt-info_bf030",pptDownload:"ppt-download_bf030",normalItemContent:"normal-item-content_bf030",normalContentText:"normal-content-text_bf030",normalInfoWrap:"normal-info-wrap_bf030",normalInfo:"normal-info_bf030",normalDownload:"normal-download_bf030",pptAggContent:"ppt-agg-content_bf030",pptAggItem:"ppt-agg-item_bf030",pptAggItemImg:"ppt-agg-item-img_bf030",starPointIcon:"star-point-icon_bf030",full:"full_bf030",little:"little_bf030",more:"more_bf030"}}))},w=o.normalizeComponent({render:function(){var e,t=this,n=t.$createElement,o=t._self._c||n;return o("div",{class:t.$style.aggregationContent},[o("search-title",{attrs:{title:t.content.title,href:t.content.url,"doc-type":t.content.fileType,"title-font-size":t.isHeadLead?18:14}}),t._v(" "),t.isMultiCover?[o("div",{class:t.$style.pptAggContent},t._l(t.covers,(function(e){return o("div",{key:e,class:t.$style.pptAggItem},[o("a",{class:t.$style.pptAggItemImg,style:{backgroundImage:"url("+e+")"},attrs:{target:"_blank",href:t.content.url}})])})),0),t._v(" "),o("div",{class:t.$style.pptExtInfo},[o("score-stars",{attrs:{"full-score":5,score:t.score}}),t._v(" "),o("div",{class:t.$style.pptInfo},[t._v("\n                共"+t._s(t.content.pageNum)+"页\n                "),o("i"),t._v("\n                "+t._s(t.downloadCount)+"次下载\n            ")]),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.downloadBtnShow,expression:"downloadBtnShow"}],class:t.$style.pptDownload,attrs:{target:"_blank"},on:{click:function(e){return t.downloadFile(t.content.url)}}},[t._v("\n                马上下载\n            ")])],1)]:[t.isHeadLead?o("div",{class:[t.$style.headLeadContent,(e={},e[t.$style.isShowCover]=!t.isNoCover,e)]},[t.isNoCover?t._e():o("a",{attrs:{href:t.content.url,target:"_blank"}},[o("div",{class:t.$style.headContentImg,style:{backgroundImage:"url("+t.cover+")"}})]),t._v(" "),o("a",{class:t.$style.headContentInfo,attrs:{href:t.content.url,target:"_blank"}},[o("div",{class:t.$style.headContentText,domProps:{innerHTML:t._s(t.content.content)}}),t._v(" "),o("div",{class:t.$style.extInfo},[o("score-stars",{attrs:{"full-score":5,score:t.score}}),t._v(" "),o("div",{class:t.$style.info},[t._v("\n                        共"+t._s(t.content.pageNum)+"页\n                        "),o("i"),t._v("\n                        "+t._s(t.downloadCount)+"次下载\n                    ")]),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.downloadBtnShow,expression:"downloadBtnShow"}],class:t.$style.extDownload,attrs:{target:"_blank"},on:{click:function(e){return t.downloadFile(t.content.url)}}},[t._v("\n                        马上下载\n                    ")])],1)])]):[o("a",{class:t.$style.normalItemContent,attrs:{href:t.content.url,target:"_blank"}},[o("div",{class:t.$style.normalContentText,domProps:{innerHTML:t._s(t.content.content)}})]),t._v(" "),o("div",{class:t.$style.normalInfoWrap},[o("score-stars",{attrs:{"full-score":5,score:t.score}}),t._v(" "),o("div",{class:t.$style.normalInfo},[t._v("\n                    共"+t._s(t.content.pageNum)+"页\n                    "),o("i"),t._v("\n                    "+t._s(t.downloadCount)+"次下载\n                ")]),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.downloadBtnShow,expression:"downloadBtnShow"}],class:t.$style.normalDownload,on:{click:function(e){return t.downloadFile(t.content.url)}}},[t._v("\n                    马上下载\n                ")])],1)]]],2)},staticRenderFns:[]},v,h,undefined,false,undefined,!1,o.createInjector,void 0,void 0),x={props:{title:{type:String,default:"查看更多"},href:{type:String,default:""}}},y=function(e){e&&(e("data-v-7fdc03de_0",{source:".top-tip_d80df{position:absolute;top:0;right:0;text-decoration:none;color:#9195a3;font-size:13px;cursor:pointer}.top-tip_d80df:active,.top-tip_d80df:hover,.top-tip_d80df:link,.top-tip_d80df:visited{text-decoration:none;color:#9195a3;outline:0}.top-tip_d80df:hover{color:#315efb}",map:void 0,media:void 0}),Object.defineProperty(this,"$style",{value:{topTip:"top-tip_d80df"}}))},k=o.normalizeComponent({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("a",{class:e.$style.topTip,attrs:{"log-data":"TopTipBtn",target:"_blank",href:e.href}},[e._v("\n    "+e._s(e.title)+">\n")])},staticRenderFns:[]},y,x,undefined,false,undefined,!1,o.createInjector,void 0,void 0),I={props:{item:{type:Object,default:function(){return{}}}}},S=function(e){e&&(e("data-v-3a57ad87_0",{source:".content-info-row_76e04{font-size:13px;line-height:21px;max-height:21px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.content-info-row_76e04.two-lines_76e04{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;white-space:normal;max-height:42px}.content-info-row_76e04 .content-info-label_76e04{display:inline;font-family:MicrosoftYaHei,sans-serif;color:#9195a3}.content-info-row_76e04 .content-info-value_76e04{display:inline;color:#151515;max-width:345px;overflow:hidden}.content-info-row_76e04.inline_76e04{width:220px;overflow:hidden;text-overflow:ellipsis;display:inline-block}.content-info-row_76e04 .content-info-value_76e04{color:#333}",map:void 0,media:void 0}),Object.defineProperty(this,"$style",{value:{contentInfoRow:"content-info-row_76e04",twoLines:"two-lines_76e04",contentInfoLabel:"content-info-label_76e04",contentInfoValue:"content-info-value_76e04",inline:"inline_76e04"}}))},C=o.normalizeComponent({render:function(){var e,t=this,n=t.$createElement,o=t._self._c||n;return o("div",{class:[t.$style.contentInfoRow,(e={},e[t.$style.twoLines]=t.item.maxLine>1,e[t.$style.inline]=t.item.inline,e)]},[o("div",{class:t.$style.contentInfoLabel},[t._v(t._s(t.item.label))]),t._v(" "),o("div",{class:t.$style.contentInfoValue},[t.item.href?o("a",{attrs:{href:t.item.href,target:"_blank","log-data":t.item.logData,rel:"href"}},[t._v(t._s(t.item.value))]):[t._v("\n            "+t._s(t.item.value)+"\n        ")]],2)])},staticRenderFns:[]},S,I,undefined,false,undefined,!1,o.createInjector,void 0,void 0),$={props:{contentList:{type:Array,default:function(){return[]}}},computed:{contentListComputed:function(){return this.contentList.map((function(e,t){return"[object Array]"===Object.prototype.toString.call(e)?e.filter((function(e){return e.value})).map((function(e,t){return e.id="".concat(e.value,"-").concat(t),e})):(e.id="".concat(e.value,"-").concat(t),[e].filter((function(e){return e.value})))})).filter((function(e){return e.length>0})).map((function(e,t){return{id:t,list:e}}))}},components:{ContentInfoRow:C}},T=function(e){e&&(e("data-v-f26cad80_0",{source:"",map:void 0,media:void 0}),Object.defineProperty(this,"$style",{value:{}}))},j=o.normalizeComponent({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.$style.pcSearchContentInfoWrap},e._l(e.contentListComputed,(function(t){return n("div",{key:t.id},e._l(t.list,(function(e){return n("content-info-row",{key:e.id,attrs:{item:e}})})),1)})),0)},staticRenderFns:[]},T,$,undefined,false,undefined,!1,o.createInjector,void 0,void 0);e.FavourErr=void 0,(m=e.FavourErr||(e.FavourErr={}))[m.Favoured=211406]="Favoured",m[m.TooMuch=211405]="TooMuch",m[m.NotLogin=200001]="NotLogin",e.__vue_component__=w,e.__vue_component__$1=k,e.__vue_component__$2=_,e.__vue_component__$3=j,e.__vue_component__$4=s,e.requestFollow=function(e){var t=e.isFollow,o=void 0===t||t,i=e.host,a=void 0===i?"":i,r=e.title,c=void 0===r?"":r;return o?n.request({url:"/user/submit/favourl?host=".concat(encodeURIComponent(a),"&page_name=").concat(encodeURIComponent(c))}):n.request({url:"/user/submit/deletefavourl?host=".concat(encodeURIComponent(a))})}}));
__sula_scope.define("sula-wap-common",["exports","@baidu/orion-util-mobile","@baidu/orion-aitrack"],(function(e,n,t){"use strict";function i(e){if(e&&e.__esModule)return e;var n=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var i=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,i.get?i:{enumerable:!0,get:function(){return e[t]}})}})),n.default=e,Object.freeze(n)}var o,r,a=i(n);var d=a.Cashier.CASHIER,c=(null===(o=window.pageData)||void 0===o||null===(r=o.landingAggPageData)||void 0===r?void 0:r.isLandingAggregate)?"aggview":"wapView";function u(e){var n=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i").exec(location.search.substr(1));return null!=n?decodeURIComponent(n[2]):""}var l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u("swkid")&&(e.ext_test_id=u("swkid")),e.fr||(e.fr=t.getReferId({pageConfig:t.WK_WAP_PAGE_MAP,pathDomains:["wk.baidu.com"],url:document.referrer})||"")};function s(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=i.docInfo,r=i.priceInfo,d=i.userInfo,u=i.vipInfo,s={docInfo:o,priceInfo:r};l(t);var p={page:c,viewBiz:s,userInfo:d,vipInfo:u,isOnlyCurPage:!0};return a.Cashier.assembleCashierUrl(e,n,p,t)}function p(e){var n,t,i,o,r=null===(n=window.pageData)||void 0===n||null===(t=n.viewBiz)||void 0===t?void 0:t.washedDoc,a=(null===(i=window.pageData)||void 0===i||null===(o=i.readerInfo)||void 0===o?void 0:o.renderFlag)||0,d=[];r&&d.push("washdoc");var c=e.isGoOnReadIntercept||!1;return d.push("renderflag".concat(a)),d.push("isReadIntercept".concat(+c)),d}e.docFileType=function(e){return[1,4,9].includes(+e)?"word":[3,6,11,14,15].includes(+e)?"ppt":[2,5,10].includes(+e)?"excel":[7].includes(+e)?"pdf":8==+e?"txt":16==+e?"epub":12==+e?"vsd":13==+e?"rtf":[19].includes(+e)?"cad":20==+e?"xmind":"unknow"},e.getCCodeExts=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,t=p(n),i=t.concat(e);return i.join("_")},e.getDocIconUrl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"unknown",n=["cad","word","epub","pdf","rtf","ppt","txt","umd","vsd","xls","xmind","excel"];return n.includes(e)?"excel"===e?"https://edu-wenku.bdimg.com/v1/wap/static/newFileIcon/xls.png":"https://edu-wenku.bdimg.com/v1/wap/static/newFileIcon/".concat(e,".png"):"https://edu-wenku.bdimg.com/v1/wap/static/newFileIcon/unknow.png"},e.payVip=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2?arguments[2]:void 0,i=s(d.VIP,e,n||{},t);location.href=i},e.randomBetween=function(e,n){return Math.ceil(Math.random()*(n-e))+e}}));
__sula_scope.define("LibAllCommon/index.LibAllCommon.750342e6.amd.min", [], function() {return {}})